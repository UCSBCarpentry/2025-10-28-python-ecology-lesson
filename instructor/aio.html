<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Data Analysis and Visualization in Python for Ecologists: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/dc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/dc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/dc/favicon-16x16.png">
<link rel="manifest" href="../favicons/dc/site.webmanifest">
<link rel="mask-icon" href="../favicons/dc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav data"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dc-logo" alt="Data Carpentry" src="../assets/images/data-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="../assets/images/data-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Data Analysis and Visualization in Python for Ecologists
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Data Analysis and Visualization in Python for Ecologists
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="CONTRIBUTORS.html">About Contributors</a></li>
<li><a class="dropdown-item" href="extra_challenges.html">Extra Challenges</a></li>
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="jupyter_notebooks.html">Overview of Jupyter Notebooks</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Analysis and Visualization in Python for Ecologists
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="n001-getting-started.html">1. Getting Started</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="n002-visualizing-matplotlib.html">2. Data visualization with Pandas and Matplotlib</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="n003-data-structures.html">3. Exploring and understanding data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="n004-index-slice-subset.html">4. Indexing, Slicing and Subsetting DataFrames</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="n005-merging-data.html">5. Combining DataFrames</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-loops-and-functions.html">6. Data Workflows and Automation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <li><a href="CONTRIBUTORS.html">About Contributors</a></li>
<li><a href="extra_challenges.html">Extra Challenges</a></li>
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="jupyter_notebooks.html">Overview of Jupyter Notebooks</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-n001-getting-started"><p>Content from <a href="n001-getting-started.html">Getting Started</a></p>
<hr>
<p>Last updated on 2025-10-27 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/n001-getting-started.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I identify and use key features of JupyterLab to create and
manage a Python notebook?</li>
<li>How do I run Python code in JupyterLab, and how can I see and
interpret the results?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Launch JupyterLab and create a new Jupyter Notebook.</li>
<li>Navigate the JupyterLab interface, including file browsing, cell
creation, and cell execution, with confidence.</li>
<li>Write and execute Python code in a Jupyter Notebook cell, observing
the output and modifying code as needed.</li>
<li>Save a Jupyter Notebook as an .ipynb file and verify the file’s
location in the directory within the session.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>This episode is a modified copy of the <a href="https://librarycarpentry.github.io/lc-python-intro/getting-started.html" class="external-link">Getting
Started episode</a> of the Python Intro for Libraries lesson.</p>
<section><h2 class="section-heading" id="why-python">Why Python?<a class="anchor" aria-label="anchor" href="#why-python"></a>
</h2>
<hr class="half-width">
<p>Python is a popular programming language for tasks such as data
collection, cleaning, and analysis. Python can help you to create
reproducible workflows to accomplish repetitive tasks more
efficiently.</p>
</section><section><h2 class="section-heading" id="what-is-python">What is Python?<a class="anchor" aria-label="anchor" href="#what-is-python"></a>
</h2>
<hr class="half-width">
<p>Python is a general purpose programming language that supports rapid
development of data analytics applications. The word “Python” is used to
refer to both, the programming language and the tool that executes the
scripts written in Python language.</p>
<p>Its main advantages are:</p>
<ul>
<li>Free</li>
<li>Open-source</li>
<li>Available on all major platforms (macOS, Linux, Windows)</li>
<li>Supported by Python Software Foundation</li>
<li>Supports multiple programming paradigms</li>
<li>Has large community</li>
<li>Rich ecosystem of third-party packages</li>
</ul>
<p><em>So, why do you need Python for data analysis?</em></p>
<ul>
<li><p><strong>Easy to learn:</strong> Python is easier to learn than
other programming languages. This is important because lower barriers
mean it is easier for new members of the community to get up to
speed.</p></li>
<li>
<p><strong>Reproducibility:</strong> Reproducibility is the ability
to obtain the same results using the same dataset(s) and analysis.</p>
<p>Data analysis written as a Python script can be reproduced on any
platform. Moreover, if you collect more or correct existing data, you
can quickly re-run your analysis!</p>
<p>An increasing number of journals and funding agencies expect analyses
to be reproducible, so knowing Python will give you an edge with these
requirements.</p>
</li>
<li>
<p><strong>Versatility:</strong> Python is a versatile language that
integrates with many existing applications to enable something
completely amazing. For example, one can use Python to generate
manuscripts, so that if you need to update your data, analysis
procedure, or change something else, you can quickly regenerate all the
figures and your manuscript will be updated automatically.</p>
<p>Python can read text files, connect to databases, and many other data
formats, on your computer or on the web.</p>
</li>
<li><p><strong>Interdisciplinary and extensible:</strong> Python
provides a framework that allows anyone to combine approaches from
different research (but not only) disciplines to best suit your analysis
needs.</p></li>
<li><p><strong>Python has a large and welcoming community:</strong>
Thousands of people use Python daily. Many of them are willing to help
you through mailing lists and websites, such as [Stack
Overflow][stack-overflow] and [Anaconda community
portal][anaconda-community].</p></li>
<li><p><strong>Free and Open-Source Software (FOSS)… and
Cross-Platform:</strong> We know we have already said that but it is
worth repeating.</p></li>
</ul></section><section><h2 class="section-heading" id="research-project-best-practices">Research Project: Best Practices<a class="anchor" aria-label="anchor" href="#research-project-best-practices"></a>
</h2>
<hr class="half-width">
<p>It is a good idea to keep a set of related data, analyses, and text
in a single folder. All scripts and text files within this folder can
then use relative paths to the data files. Working this way makes it a
lot easier to move around your project and share it with others.</p>
<div class="section level3">
<h3 id="organizing-your-working-directory">Organizing your working directory<a class="anchor" aria-label="anchor" href="#organizing-your-working-directory"></a>
</h3>
<p>Using a consistent folder structure across your projects will help
you keep things organized, and will also make it easy to find/file
things in the future. This can be especially helpful when you have
multiple projects. In general, you may wish to create separate
directories for your scripts, data, and documents.</p>
<ul>
<li><p><strong><code>data/</code></strong>: Use this folder to store
your raw data. For the sake of transparency and provenance, you should
always keep a copy of your <strong>raw data</strong>. If you need to
cleanup data, do it programmatically (<em>i.e.</em> with scripts) and
make sure to separate cleaned up data from the raw data. For example,
you can store raw data in files <code>./data/raw/</code> and clean data
in <code>./data/clean/</code>.</p></li>
<li><p><strong><code>documents/</code></strong>: Use this folder to
store outlines, drafts, and other text.</p></li>
<li><p><strong><code>code/</code></strong>: Use this folder to store
your (Python) scripts for data cleaning, analysis, and plotting that you
use in this particular project.</p></li>
</ul>
<p>You may need to create additional directories depending on your
project needs, but these should form the backbone of your project’s
directory. For this workshop, we will need a <code>data/</code> folder
to store our raw data, and we will later create a
<code>data_output/</code> folder when we learn how to export data as CSV
files.</p>
</div>
</section><section><h2 class="section-heading" id="use-jupyterlab-to-edit-and-run-python-code-">Use JupyterLab to edit and run Python code.<a class="anchor" aria-label="anchor" href="#use-jupyterlab-to-edit-and-run-python-code-"></a>
</h2>
<hr class="half-width">
<p>For having a common platform to run our Python code, we’ll use the <a href="https://carpentryworkshop.lsit.ucsb.edu/" class="external-link">JupyterHub instance
provided by LSIT</a>. If you want to install Python on your machine, <a href="index.html#setup">the setup instructions</a> for details on how to
install Python, JupyterLab, and the necessary packages using Pixi.</p>
<div class="section level3">
<h3 id="getting-started-with-jupyterlab">Getting started with JupyterLab<a class="anchor" aria-label="anchor" href="#getting-started-with-jupyterlab"></a>
</h3>
<p>To run Python, we are going to use Jupyter Notebooks via <a href="https://jupyterlab.readthedocs.io/en/stable/" class="external-link">JupyterLab</a>.
Jupyter notebooks are common tools for data science and visualization,
and serve as a convenient environment for running Python code
interactively where we can view and share the results of our Python
code.</p>
<div id="alternatives-to-juypter" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="alternatives-to-juypter" class="callout-inner">
<h3 class="callout-title">Alternatives to Juypter</h3>
<div class="callout-content">
<p>There are other ways of editing, managing, and running Python code.
Software developers often use an integrated development environment
(IDE) like <a href="https://www.jetbrains.com/pycharm/" class="external-link">PyCharm</a>, <a href="https://www.spyder-ide.org/" class="external-link">Spyder</a> or <a href="https://code.visualstudio.com/" class="external-link">Visual Studio Code (VS Code)</a>,
to create and edit Python scripts. Others use text editors like Vim or
Emacs to hand-code Python. After editing and saving Python scripts you
can execute those programs within an IDE or directly on the command
line.</p>
</div>
</div>
</div>
<p>Jupyter notebooks let us execute and view the results of our Python
code immediately within the notebook. JupyterLab has several other handy
features:</p>
<ul>
<li>You can easily type, edit, and copy and paste blocks of code.</li>
<li>It allows you to annotate your code with links, different sized
text, bullets, etc. to make it more accessible to you and your
collaborators.</li>
<li>It allows you to display figures next to the code to better explore
your data and visualize the results of your analysis.</li>
<li>Each notebook contains one or more cells that contain code, text, or
images.</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="the-jupyterlab-interface">The JupyterLab Interface<a class="anchor" aria-label="anchor" href="#the-jupyterlab-interface"></a>
</h2>
<hr class="half-width">
<p>Launching JupyterLab opens a new tab or window in your preferred web
browser. While JupyterLab enables you to run code from your browser, it
does not require you to be online. If you take a look at the URL in your
browser address bar, you should see that the environment is located at
your localhost, meaning it is running from your computer:
<code>http://localhost:8888/lab</code>.</p>
<p>When you first open JupyterLab you will see two main panels. In the
left sidebar is your file browser. You should see a folder in the file
browser named <code>data</code> that contains all of our data.</p>
<div class="section level3">
<h3 id="creating-a-juypter-notebook">Creating a Juypter Notebook<a class="anchor" aria-label="anchor" href="#creating-a-juypter-notebook"></a>
</h3>
<p>To the right you will see a <code>Launcher</code> tab. Here we have
options to launch a Python 3 notebook, a Terminal (where we can use
shell commands), text files, and other items. For now, we want to launch
a new Python 3 notebook, so click once on the
<code>Python 3 (ipykernel)</code> button underneath the Notebook header.
You can also create a new notebook by selecting <em>New -&gt;
Notebook</em> from the <em>File</em> menu in the Menu Bar.</p>
<figure><img src="../fig/0_jupyterlab_launcher.png" alt="screenshot of the JupyterLab for launching notebook" class="figure mx-auto d-block"><div class="figcaption">Launching a new Python 3 Notebook</div>
</figure><p>When you start a new Notebook you should see a new tab labeled
<code>Untitled.ipynb</code>. You will also see this file listed in the
file browser to the left. Right-click on the <code>Untitled.ipynb</code>
file in the file browser and choose <code>Rename</code> from the
dropdown options. Let’s call the notebook file,
<code>workshop.ipynb</code>.</p>
<div id="jupyterlab-what-about-jupyter-notebooks-python-notebooks-ipython" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="jupyterlab-what-about-jupyter-notebooks-python-notebooks-ipython" class="callout-inner">
<h3 class="callout-title">JupyterLab? What about Jupyter notebooks?
Python notebooks? IPython?</h3>
<div class="callout-content">
<p>JupyterLab is the <a href="https://jupyterlab.readthedocs.io/en/stable/getting_started/overview.html#overview" class="external-link">next
stage in the evolution of the Jupyter Notebook</a>. If you have prior
experience working with Jupyter notebooks, then you will have a good
idea of how to work with JupyterLab. Jupyter was created as a spinoff of
IPython in 2014, and includes interactive computing support for
languages other than just Python, including R and Julia. While you’ll
still see some references to Python and IPython notebooks, IPython
notebooks are officially deprecated in favor of Jupyter notebooks.</p>
</div>
</div>
</div>
<p>We will share more features of the JupyterLab environment as we
advance through the lesson, but for now let’s turn to how to run Python
code.</p>
</div>
<div class="section level3">
<h3 id="running-python-code">Running Python code<a class="anchor" aria-label="anchor" href="#running-python-code"></a>
</h3>
<p>Jupyter allows you to add code and formatted text in different types
of blocks called cells. By default, each new cell in a Jupyter Notebook
will be a “code cell” that allows you to input and run Python code.
Let’s start by having Python do some arithmetic for us.</p>
<p>In the first cell type 7 * 3, and then press the
<kbd>Shift</kbd>+<kbd>Return</kbd> keys together to execute the contents
of the cell. (You can also run a cell by making sure your cursor is in
the cell and choosing <code>Run &gt; Run Selected Cells</code> or
selecting the “Play” icon (the sideways triangle) at the top of the
noteboook.)</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="dv">7</span> <span class="op">*</span> <span class="dv">3</span></span></code></pre>
</div>
<p>You should see the output appear immediately below the cell, and
Jupyter will also create a new code cell for you.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="dv">21</span></span></code></pre>
</div>
<p>If you move your cursor back to the first cell, just after the
<code>7 * 3</code> code, and hit the <kbd>Return</kbd> key (without
shift), you should see a new line in the cell where you can add more
Python code. Let’s add another calculation to the same cell:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="dv">7</span> <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="dv">2</span> <span class="op">+</span><span class="dv">1</span></span></code></pre>
</div>
<p>While Python runs both calculations Juypter will only display the
output from the last line of code in a specific cell, unless you tell it
to do otherwise.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dv">3</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="editing-the-notebook">Editing the notebook<a class="anchor" aria-label="anchor" href="#editing-the-notebook"></a>
</h3>
<p>You can use the icons at the top of your notebook to edit the cells
in your Notebook:</p>
<ul>
<li>The <code>+</code> icon adds a new cell below the selected
cell.</li>
<li>The scissors icon will delete the current cell.</li>
</ul>
<p>You can move cells around in your notebook by hovering over the
left-hand margin of a cell until your cursor changes into a four-pointed
arrow, and then dragging and dropping the cell where you want it.</p>
<div id="markdown" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="markdown" class="callout-inner">
<h3 class="callout-title">Markdown</h3>
<div class="callout-content">
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Instructors: Since the lesson is focused on Python we don’t include
any Markdown examples here. If you want to teach Markdown, note that it
will slow down the lesson.</p>
</div>
</div>
</div>
</div>
<p>You can add text to a Juypter notebook by selecting a cell, and
changing the dropdown above the notebook from <code>Code</code> to
<code>Markdown</code>. Markdown is a lightweight language for formatting
text. This feature allows you to annotate your code, add headers, and
write documentation to help explain the code. While we won’t cover
Markdown in this lesson, there are many helpful online guides out there:
- <a href="https://www.ibm.com/docs/en/watson-studio-local/1.2.3?topic=notebooks-markdown-jupyter-cheatsheet" class="external-link">Markdown
for Jupyter Cheatsheet (IBM)</a> - <a href="https://www.markdownguide.org/" class="external-link">Markdown Guide (Matt Cone)</a></p>
<figure><img src="../fig/0_jupyter_markdown_dd.png" alt="screenshot of the Jupyter notebook dropdown to change a cell to Markdown" class="figure mx-auto d-block"><div class="figcaption">Changing a cell from Code to Markdown</div>
</figure><p>You can also use “hotkeys”” to change Jupyter cells from Code to
Markdown and back:</p>
<ul>
<li>Click on the code cell that you want to convert to a Markdown
cell.</li>
<li>Press the <kbd>Esc</kbd> key to enter command mode.</li>
<li>Press the <kbd>M</kbd> key to convert the cell to Markdown.</li>
<li>Press the <kbd>y</kbd> key to convert the cell back to Code.</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>You can launch JupyterLab from the command line or from Anaconda
Navigator.</li>
<li>You can use a JupyterLab notebook to edit and run Python.</li>
<li>Notebooks can include both code and markdown (text) cells.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-n002-visualizing-matplotlib"><p>Content from <a href="n002-visualizing-matplotlib.html">Data visualization with Pandas and Matplotlib</a></p>
<hr>
<p>Last updated on 2025-10-28 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/n002-visualizing-matplotlib.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you start exploring and visualizing data using Python?</li>
<li>How can you make and customize plots?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the difference between installing a library and importing
it.</li>
<li>Load data from a CSV file into a pandas DataFrame and inspect its
contents and structure.</li>
<li>Generate plots, such as scatter plots and box plots, directly from a
pandas DataFrame.</li>
<li>Construct a Matplotlib figure containing multiple subplots.</li>
<li>Customize plot aesthetics like titles, axis labels, colors, and
layout by passing arguments to plotting functions.</li>
<li>Export a completed figure to a file.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="loading-libraries">Loading libraries<a class="anchor" aria-label="anchor" href="#loading-libraries"></a>
</h2>
<hr class="half-width">
<p>A great feature in Python is the ability to import
<strong>libraries</strong> to extend its capabilities. For now, we’ll
focus on two of the most widely used libraries for data analysis: pandas
and Matplotlib. We’ll be using pandas for data wrangling and
manipulation, and Matplotlib for (you guessed it) making plots.</p>
<p>To be able to use these libraries in our code, we have to
<strong>install</strong> and <strong>import</strong> them. Installation
is needed as pandas and Matplotlib are third-party libraries that aren’t
built into Python. You should have gone through the installation process
during the setup for the workshop (if not, visit the <a href="index.html">setup page</a>), so we’ll jump straight to showing you
how to import libraries.</p>
<p>To import a library, we use the syntax
<code>import libraryName</code>. If we want to give the library a
nickname to shorten the command each time we call it, we can add
<code>as nickNameHere</code>. Here is how you’d import pandas and
Matplotlib using the common nicknames <code>pd</code> and
<code>plt</code>, respectively.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code></pre>
</div>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Possible questions and errors with the import command </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>If you got an error similar to
<code>ModuleNotFoundError: No module named '___'</code>, it means you
haven’t installed the library. Check the <a href="index.html">setup
page</a> to install it and double check you typed it correctly.</p>
<p>If you’re asking yourself why we used <code>matplotlib.pyplot</code>
instead of just <code>matplotlib</code>, good question! We are not
importing the entire Matplotlib library, we are only importing the
fraction of it we need for plotting, called pyplot. We will return to
this topic later to explain more about <code>matplotlib.pyplot</code>
and why that is the part that we need to import.</p>
</div>
</div>
</div>
</div>
<p>For the purposes of this workshop, you only need to install a library
once on your computer. However, you must import it in every notebook or
script where you plan to use it, since Python doesn’t automatically load
installed libraries.</p>
<p>In your future work with Python, this may not always be the case. You
might want to keep different projects separate by using a different
Python environment for each one. In that case, you’ll need to install
the same library in each environment. We’ll talk more about environments
later in the workshop.</p>
</section><section><h2 class="section-heading" id="loading-and-exploring-data">Loading and exploring data<a class="anchor" aria-label="anchor" href="#loading-and-exploring-data"></a>
</h2>
<hr class="half-width">
<p>For this lesson, we will be using the Portal Teaching data, a subset
of the data from Ernst et al. <a href="https://www.esapubs.org/archive/ecol/E090/118/default.htm" class="external-link">Long-term
monitoring and experimental manipulation of a Chihuahuan Desert
ecosystem near Portal, Arizona, USA</a>.</p>
<p>We will be using files from the <a href="https://figshare.com/articles/Portal_Project_Teaching_Database/1314459" class="external-link">Portal
Project Teaching Database</a>. This section will use the
<code>surveys_complete_77_89.csv</code> file that can be downloaded
here: <a href="https://datacarpentry.github.io/R-ecology-lesson/data/cleaned/surveys_complete_77_89.csv" class="external-link">https://datacarpentry.github.io/R-ecology-lesson/data/cleaned/surveys_complete_77_89.csv</a></p>
<p>We are studying the weight, hindfoot length, and sex of animals
caught in sites of our study area. The data is stored as a
<code>.csv</code> file: each row holds information for a single animal,
and the columns represent:</p>
<table class="table">
<thead><tr class="header">
<th>Column</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>record_id</td>
<td>Unique id for the observation</td>
</tr>
<tr class="even">
<td>month</td>
<td>month of observation</td>
</tr>
<tr class="odd">
<td>day</td>
<td>day of observation</td>
</tr>
<tr class="even">
<td>year</td>
<td>year of observation</td>
</tr>
<tr class="odd">
<td>plot_id</td>
<td>ID of a particular site</td>
</tr>
<tr class="even">
<td>species_id</td>
<td>2-letter code</td>
</tr>
<tr class="odd">
<td>sex</td>
<td>sex of animal (“M”, “F”)</td>
</tr>
<tr class="even">
<td>hindfoot_length</td>
<td>length of the hindfoot in mm</td>
</tr>
<tr class="odd">
<td>weight</td>
<td>weight of the animal in grams</td>
</tr>
<tr class="even">
<td>genus</td>
<td>the genus of the species</td>
</tr>
<tr class="odd">
<td>species</td>
<td>the latin species name</td>
</tr>
<tr class="even">
<td>taxa</td>
<td>general taxonomic category</td>
</tr>
<tr class="odd">
<td>plot_type</td>
<td>type of experimental manipulation conducted</td>
</tr>
</tbody>
</table>
<p>We’ll load the data in the csv into Python and name this new object
<code>samples</code>. For this, we can use the <code>pandas</code>
library and its <code>.read_csv()</code> function, like shown here:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>samples <span class="op">=</span> pd.read_csv(<span class="st">'https://tinyurl.com/ucsbcarp-data'</span>)</span></code></pre>
</div>
<p>Here we have created a new object that we can reference later in our
code. All objects in Python have a <code>type</code>, which determine
what is possible to do with them. To know the type of an object, we can
use the <code>type()</code> function.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">type</span>(samples)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">pandas.core.frame.DataFrame</span></span></code></pre>
</div>
<p>Notice how we didn’t use the <code>=</code> operator in this case.
This means we didn’t create a new object, we just asked Python to show
us the output of the function. When we created <code>samples</code> with
the <code>=</code> operator it didn’t print an output, but it stored the
object in Python which we can later use.</p>
<p>From the output we can read that <code>samples</code> is an object of
pandas DataFrame type. We’ll explore in depth what a DataFrame is in the
next episode. For now, we only need to keep in mind that our data is now
contained in a DataFrame. And this is important as the methods we’ll
cover now -<code>.head()</code>, <code>.info()</code>, and
<code>.plot()</code>- are only available to DataFrame objects.</p>
<p>Now that our data is in Python, we can start working with it. A good
place to start is taking a look at the data. With the
<code>.head()</code> method, we can see the first five rows of the data
set.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>samples.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  \
0          1      7   16  1977        2         NL   M             32.0
1          2      7   16  1977        3         NL   M             33.0
2          3      7   16  1977        2         DM   F             37.0
3          4      7   16  1977        7         DM   M             36.0
4          5      7   16  1977        3         DM   M             35.0

   weight      genus   species    taxa                 plot_type
0     NaN    Neotoma  albigula  Rodent                   Control
1     NaN    Neotoma  albigula  Rodent  Long-term Krat Exclosure
2     NaN  Dipodomys  merriami  Rodent                   Control
3     NaN  Dipodomys  merriami  Rodent          Rodent Exclosure
4     NaN  Dipodomys  merriami  Rodent  Long-term Krat Exclosure  </code></pre>
</div>
<p>The <code>.tail()</code> method will give us instead the last five
rows of the data. If we want to override this default and instead
display the last two rows, we can use the <code>n</code> argument. An
<strong>argument</strong> is an input that a function or method takes to
modify how it operates, and you set arguments using the <code>=</code>
sign.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>samples.tail(n<span class="op">=</span><span class="dv">2</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  plot_id species_id sex  hindfoot_length  \
16876      16877     12    5  1989       11         DM   M             37.0
16877      16878     12    5  1989        8         DM   F             37.0

       weight      genus   species    taxa plot_type
16876    50.0  Dipodomys  merriami  Rodent   Control
16877    42.0  Dipodomys  merriami  Rodent   Control</code></pre>
</div>
<p>Another useful method to get a glimpse of the data is
<code>.info()</code>. This tells us how many rows the data set has (# of
entries), the number of columns, and for each of the columns it says its
name, the number of non-null (or non-empty) rows it contains, and its
data type.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>samples.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 16878 entries, 0 to 16877
Data columns (total 13 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   record_id        16878 non-null  int64
 1   month            16878 non-null  int64
 2   day              16878 non-null  int64
 3   year             16878 non-null  int64
 4   plot_id          16878 non-null  int64
 5   species_id       16521 non-null  object
 6   sex              15578 non-null  object
 7   hindfoot_length  14145 non-null  float64
 8   weight           15186 non-null  float64
 9   genus            16521 non-null  object
 10  species          16521 non-null  object
 11  taxa             16521 non-null  object
 12  plot_type        16878 non-null  object
dtypes: float64(2), int64(5), object(6)
memory usage: 1.7+ MB</code></pre>
</div>
<div id="functions-and-methods-in-python" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="functions-and-methods-in-python" class="callout-inner">
<h3 class="callout-title">Functions and methods in Python</h3>
<div class="callout-content">
<p>As we saw, functions allow us to perform a given task. They take
inputs, perform the task on those inputs, and return an output. For
example, with the <code>pd.read_csv()</code> function, we gave the file
path as input, and it returned the DataFrame as output.</p>
<p>Functions can be built-in, which means they come natively with
Python, like <code>type()</code> or <code>print()</code>. Or they can
come from an imported library, like <code>pd.read_csv()</code> comes
from Pandas.</p>
<p>A method is similar to a function. The only difference is a method is
associated with a given object type. That’s why we use the syntax
<code>object_name.method_name()</code>.</p>
<p>This is the case for <code>.head()</code>, <code>.tail()</code>, and
<code>.info()</code>: they are methods that the pandas
<code>DataFrame</code> object carries around with it.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="basic-plotting-with-pandas">Basic plotting with Pandas<a class="anchor" aria-label="anchor" href="#basic-plotting-with-pandas"></a>
</h2>
<hr class="half-width">
<p>pandas makes it easy to start plotting your data with the
<code>.plot()</code> method. By passing arguments to this method, we can
tell Pandas how we want the plot to look.</p>
<p>With the following code, we will make a scatter plot (argument
<code>kind = 'scatter'</code>) to analyze the relationship between the
weight (which will plot in the x axis, argument
<code>x = 'weight'</code>) and the hindfoot length (in the y axis,
argument <code>y = 'hindfoot_length'</code>) of the animals sampled at
the study site.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>, kind <span class="op">=</span> <span class="st">'scatter'</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_scatter_plot.png" alt="Our first plot with Pandas, a scatter plot" class="figure mx-auto d-block"></figure><div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> All roads lead to Rome - Different code, same result </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>When coding, you’ll often find the case where you can get to the same
result using different code. In this case, the creators of pandas make
it possible to make the previous plot with the<code>.plot.scatter</code>
method, without having to specify the “kind” argument.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>samples.plot.scatter(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>This scatter plot shows there seems to be a positive relation between
weight and hindfoot length, where heavier animals tend to have bigger
hindfeet. But you may have noticed that parts of our scatter plot have
many overlapping points, making it difficult to see all the data. We can
adjust the transparency of the points using the <code>alpha</code>
argument, which takes a value between 0 and 1.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>,</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'scatter'</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_alpha_scatter_plot.png" alt="Adding transparency to our previous scatter plot" class="figure mx-auto d-block"></figure><p>With transparency added to the points, we can more clearly observe a
clustering of data points into several more densely populated regions of
the scatter plot.</p>
<p>There are multiple ways we can learn what other arguments we have
available to modify the looks of our plot. One of those ways is reading
the documentation of the library we are using. In the next episode,
we’ll cover other ways to get help in Python.</p>
<div id="challenge---changing-the-color-of-points" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---changing-the-color-of-points" class="callout-inner">
<h3 class="callout-title">Challenge - Changing the color of points</h3>
<div class="callout-content">
<p>Check the documentation of the pandas method
<code>.plot.scatter()</code> to learn what argument you can use to
change the color of the points in the scatter plot to green.</p>
<p>Here is the link to the documentation: <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.scatter.html" class="external-link">https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.scatter.html</a></p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Continuing from our last line of code where we added the “alpha”
argument, we can add the argument <code>c = 'green'</code> to achieve
what we want.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>,</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>                  kind<span class="op">=</span><span class="st">'scatter'</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, c <span class="op">=</span> <span class="st">'green'</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_color_scatter_plot.png" alt="Changing the color of the points to our previous scatter plot" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>Similarly, we could make a <a href="https://en.wikipedia.org/wiki/Box_plot" class="external-link">box plot</a> to explore
the distribution of the hindfoot length across all samples. In this
case, pandas wants us to use different arguments. We’ll use the
<code>column</code> argument to specify what is the column we want to
analyze.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, kind <span class="op">=</span> <span class="st">'box'</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_box_plot.png" alt="Box plot of the hindfoot_length variable" class="figure mx-auto d-block"></figure><p>The box plot shows the median hindfoot length is around 32mm
(represented by the line inside the box) and most values lie between 20
and 35 mm (which are the borders of the box, representing the 1st and
3rd quartile of the data, respectively).</p>
<p>We could further expand this analysis, and see the distribution of
this variable across different plot types. We can add a <code>by</code>
argument, saying by which variable we want do disaggregate the box
plot.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>, kind <span class="op">=</span> <span class="st">'box'</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_byplot_box_plot.png" alt="Box plot of the hindfoot_length variable by each plot" class="figure mx-auto d-block"></figure><p>As shown in the previous image, the x-axis labels overlap with each
other, which makes them unreadable. Furthermore, we’d like to start
customizing the title and the axis labels. Or maybe make multiple
subplots in the same figure. At this point we realize a more
fine-grained control over our graph is needed, and here is where
Matplotlib appears in the picture.</p>
</section><section><h2 class="section-heading" id="advanced-plots-with-matplotlib">Advanced plots with Matplotlib<a class="anchor" aria-label="anchor" href="#advanced-plots-with-matplotlib"></a>
</h2>
<hr class="half-width">
<p><a href="https://matplotlib.org/" class="external-link">Matplotlib</a> is a Python library
that is widely used throughout the scientific Python community to create
high-quality and publication-ready graphics. It supports a wide range of
raster and vector graphics formats including PNG, PostScript, EPS, PDF
and SVG.</p>
<p>Moreover, Matplotlib is the actual engine behind the plotting
capabilities of Pandas, and other plotting libraries like <a href="https://seaborn.pydata.org/" class="external-link">seaborn</a> and <a href="https://plotnine.org/" class="external-link">plotnine</a>. For example, when we call the
<code>.plot()</code> methods on pandas data objects, Matplotlib is
actually being used “backstage”.</p>
<p>Our first step in the process is creating our figure and our axes (or
plots), using the <code>plt.subplots()</code> function.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>fig, axis <span class="op">=</span> plt.subplots()</span></code></pre>
</div>
<figure><img src="../fig/n002_empty_plot_area.png" alt="Empty plot area in a Matplotlib plot" class="figure mx-auto d-block"></figure><p>The <code>fig</code> object we are creating is the entire plot area,
which can contain one or multiple axes. In this case, the function
default is to create only one set of axes, which will be referenced as
the <code>axis</code> object. For now, this results in an empty plot
like a blank canvas for us to start plotting data on to.</p>
<p>We’ll add the previous box plot we made to this <code>axis</code>, by
using the <code>ax</code> argument inside the <code>.plot()</code>
function. This gives us a plot just as we had it before, but now onto an
axis object that we can start customizing.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>fig, axis <span class="op">=</span> plt.subplots()</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axis)</span></code></pre>
</div>
<figure><img src="../fig/n002_boxplot_matplotlib.png" alt="Adding our previous box plot to the plot area" class="figure mx-auto d-block"></figure><p>To start, we can rotate the x-axis labels 90 degrees to make them
readable. For this, we use the <code>.tick_params()</code> method on the
<code>axis</code> object.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>fig, axis <span class="op">=</span> plt.subplots()</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axis)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>axis.tick_params(axis <span class="op">=</span> <span class="st">'x'</span>, rotation <span class="op">=</span> <span class="dv">90</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_axisrotation_boxplot_matplotlib.png" alt="Rotating x-axis labels to our previous box plot" class="figure mx-auto d-block"></figure><p>Axis objects have a lot of methods like <code>.tick_params()</code>,
which can be used to adjust the layout and styling of the plot. For
example, we can modify the title (the column name is the default) and
add the x- and y-axis labels with the <code>.set_title()</code>,
<code>.set_xlabel()</code>, and <code>.set_ylabel()</code> methods. By
now, you may have begun copying and pasting the parts of the code that
don’t change to save yourself some typing time. Some lines might only
include subtle changes, so take care not to miss anything small and
important when reusing lines written previously.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>fig, axis <span class="op">=</span> plt.subplots()</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axis)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>axis.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation <span class="op">=</span> <span class="dv">90</span>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>axis.set_title(<span class="st">'Distribution of hindfoot lenght across plot types'</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>axis.set_xlabel(<span class="st">'Plot Types'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>axis.set_ylabel(<span class="st">'Hindfoot Length (mm)'</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_custom_boxplot_matplotlib.png" alt="Customizing our previous box plot adding axis labels and a title" class="figure mx-auto d-block"></figure><div class="section level3">
<h3 id="making-multiple-subplots">Making multiple subplots<a class="anchor" aria-label="anchor" href="#making-multiple-subplots"></a>
</h3>
<p>If we want more than one plot in the same figure, we could specify
the number of rows (<code>nrows</code> argument) and the number of
columns (<code>ncols</code>) when calling the <code>plt.subplots</code>
function. For example, let’s say we want two plots (or axes), organized
in two columns and one row. This will be useful in a minute, when we
arrange our scatter plot and box plot in a single figure.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">1</span>, ncols <span class="op">=</span> <span class="dv">2</span>) <span class="co"># note the variable name is 'axes' here rather than 'axis' used above</span></span></code></pre>
</div>
<figure><img src="../fig/n002_subplots.png" alt="A Matplotlib figure with two subplots, but empty still" class="figure mx-auto d-block"></figure><p>The <code>axes</code> object contains two objects, which correspond
to the two sets of axes. We can access each of the objects inside
<code>axes</code> using <code>axes[0]</code> and
<code>axes[1]</code>.</p>
<p>We’ll get more comfortable with this Python syntax during the
workshop, but the most important thing to know now is that Python
indexes elements starting with 0. This means the first element in a
sequence has index 0, the second element has index 1, the third element
is 2, and so forth.</p>
<p>Here is the code to have two subplots, one with the scatter plot (on
<code>axes[0]</code>), and one with the box plot (on
<code>axes[1]</code>):</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">1</span>, ncols <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>, kind<span class="op">=</span><span class="st">'scatter'</span>,</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>                  alpha <span class="op">=</span> <span class="fl">0.2</span>, ax <span class="op">=</span> axes[<span class="dv">0</span>])</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axes[<span class="dv">1</span>])</span></code></pre>
</div>
<figure><img src="../fig/n002_scatter_box_subplots.png" alt="Adding scatter and box plots to our figure with two subplots" class="figure mx-auto d-block"></figure><p>As shown before, Matplotlib allows us to customize every aspect of
our figure. So we’ll make it more professional by adding titles and axis
labels. Notice at the end the introduction of the
<code>.suptitle()</code> method, which allows us to add a super title to
the entire figure. We also use the <code>.tight_layout()</code> method,
to automatically adjust the padding between and around subplots. (Feel
free to try the code below with and without the
<code>fig.tight_layout()</code> line to better understand the difference
it makes.)</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">1</span>, ncols <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>, kind<span class="op">=</span><span class="st">'scatter'</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>, ax <span class="op">=</span> axes[<span class="dv">0</span>])</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Weight vs. Hindfoot Length'</span>)</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Weight (g)'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Hindfoot Length (mm)'</span>)</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axes[<span class="dv">1</span>])</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>axes[<span class="dv">1</span>].tick_params(axis <span class="op">=</span> <span class="st">'x'</span>, rotation <span class="op">=</span> <span class="dv">90</span>)</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Hindfoot Length by Plot Type'</span>)</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Plot Types'</span>)</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Hindfoot Length (mm)'</span>)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>fig.suptitle(<span class="st">'Analysis of Hindfoot Length variable'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>fig.tight_layout()</span></code></pre>
</div>
<figure><img src="../fig/n002_custom_subplots.png" alt="Customizing title and labels for our figure with two subplots" class="figure mx-auto d-block"></figure><p>You now have the basic tools to create and customize plots using
pandas and Matplotlib! Let’s put it into practice.</p>
<div id="challenge---changing-figure-size" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---changing-figure-size" class="callout-inner">
<h3 class="callout-title">Challenge - Changing figure size</h3>
<div class="callout-content">
<p>Our plot probably needs more vertical space, so let’s change the
figure size. Take a look at <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html" class="external-link">Matplotlib’s
figure documentation</a> and answer:</p>
<ol style="list-style-type: decimal">
<li>What is the argument we need to make this adjustment?</li>
<li>What is the default figure size if we don’t change the
argument?</li>
<li>In which units is the size specified (inches, pixels,
centimeters)?</li>
<li>Use the argument in the <code>plt.subplots()</code> function to make
the previous figure 7x7 inches in size.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Answers </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The argument we’re looking for is <code>figsize</code>. Figure
dimension is specified as (width, height) in inches, and the default
figure size is 6.4 inches wide and 4.8 inches tall. We can add the
<code>figsize = (7,7)</code> argument like this:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">1</span>, ncols <span class="op">=</span> <span class="dv">2</span>, figsize <span class="op">=</span> (<span class="dv">7</span>,<span class="dv">7</span>))</span></code></pre>
</div>
<p>And keep the rest of our plot the same.</p>
</div>
</div>
</div>
</div>
<div id="challenge---add-a-third-axis" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---add-a-third-axis" class="callout-inner">
<h3 class="callout-title">Challenge - Add a third axis</h3>
<div class="callout-content">
<p>Let’s explore the data for the hindfoot length variable more deeply.
Add a third axis to the plot we’ve been working on, for a histogram of
the hindfoot length. For this you can add the argument
<code>kind = hist</code> to an additional <code>.plot()</code> method
call.</p>
<p>After that, there’s a few things you can do to make this graph look
nicer. Try making each of these one at a time to see how it changes.</p>
<ul>
<li>Increase the size of the figure to make it 10in wide and 7in long,
just like in the previous challenge.</li>
<li>Make the histogram orientation horizontal and hide the legend. For
this, add the <code>orientation='horizontal'</code> and
<code>legend = False</code> arguments to your <code>.plot()</code>
method.</li>
<li>As the y-axis of each subplot is the same, we could use a shared
y-axis for all three. Explore the Matplotlib documentation some more to
find out which parameter you can use to achieve this.</li>
<li>Add a nice title to your third subplot.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Answers </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Here is the final code to achieve all of the previous goals. Notice
what has changed from our previous code.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(nrows <span class="op">=</span> <span class="dv">1</span>, ncols <span class="op">=</span> <span class="dv">3</span>, figsize <span class="op">=</span> (<span class="dv">10</span>,<span class="dv">7</span>), sharey <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>samples.plot(x <span class="op">=</span> <span class="st">'weight'</span>, y <span class="op">=</span> <span class="st">'hindfoot_length'</span>, kind<span class="op">=</span><span class="st">'scatter'</span>,</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>                  alpha <span class="op">=</span> <span class="fl">0.2</span>, ax <span class="op">=</span> axes[<span class="dv">0</span>])</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Weight vs. Hindfoot Length'</span>)</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Weight (g)'</span>)</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Hindfoot Length (mm)'</span>)</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, by <span class="op">=</span> <span class="st">'plot_type'</span>,</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>                  kind <span class="op">=</span> <span class="st">'box'</span>, ax <span class="op">=</span> axes[<span class="dv">1</span>])</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>axes[<span class="dv">1</span>].tick_params(axis <span class="op">=</span>  <span class="st">'x'</span>, rotation <span class="op">=</span> <span class="dv">90</span>)</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Hindfoot Length by Plot Type'</span>)</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Plot Types'</span>)</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Hindfoot Length (mm)2'</span>)</span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>samples.plot(column <span class="op">=</span> <span class="st">'hindfoot_length'</span>, orientation<span class="op">=</span><span class="st">'horizontal'</span>,</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>                  legend <span class="op">=</span> <span class="va">False</span>, kind <span class="op">=</span> <span class="st">'hist'</span>, ax <span class="op">=</span> axes[<span class="dv">2</span>])</span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="st">'Hindfoot Length Histogram'</span>)</span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a>fig.suptitle(<span class="st">'Analysis of Hindfoot Length variable'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a>fig.tight_layout()</span></code></pre>
</div>
<figure><img src="../fig/n002_advanced_subplots.png" alt="A figure with three subplots: scatter, box, and histogram" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="exporting-plots">Exporting plots<a class="anchor" aria-label="anchor" href="#exporting-plots"></a>
</h3>
<p>Until now our plots only live inside Python. Therefore, once we’re
satisfied with the resulting plot, we need to save it with the
<code>.savefig()</code> method on our figure object. The only required
argument is the file path in your computer where you want to save it.
Matplotlib recognizes the extension used in the filename and supports
(on most computers) png, pdf, ps, eps and svg formats.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>fig.savefig(<span class="st">'images/hindfoot_analysis.png'</span>)</span></code></pre>
</div>
<div id="challenge---make-and-save-your-own-plot" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="challenge---make-and-save-your-own-plot" class="callout-inner">
<h3 class="callout-title">Challenge - Make and save your own plot</h3>
<div class="callout-content">
<p>Put all this knowledge to practice and come up with your own plot of
the Portal Teaching data set. Use a different combination of variables,
or a different kind of plot. Here is the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.html" class="external-link">pandas
<code>pd.plot()</code> function documentation</a>, where you can see
what other values you can use in the <code>kind</code> argument.</p>
<p>Save your plot to the “images” folder with a .pdf extension.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-plotting-libraries">Other plotting libraries<a class="anchor" aria-label="anchor" href="#other-plotting-libraries"></a>
</h2>
<hr class="half-width">
<p>Learning to plot with pandas and Matplotlib can be overwhelming by
itself. However, we want to invite you to explore other plotting
libraries available in Python, as some types of plots will be easier to
make with them. This will also take time and practice, as every new
library come with its own functions, methods, and arguments. But with
time and practice, you’ll get used to researching and learning about
these new libraries and how they work.</p>
<p>This is where the true power of open source software lies. There is
the big community of contributors who all the time are creating new
libraries or improving the existing ones.</p>
<p>Some of the libraries you might find useful are:</p>
<ul>
<li>
<p><a href="https://plotnine.org/" class="external-link"><strong>Plotnine:</strong></a>
Inspired by R’s ggplot2, it implements the “grammar of graphics”
approach. If you come from Rworld and the tidyverse, you’ll definitely
want to check it out.</p>
<p>On a plotnine figure, a Matplotlib figure is returned when you use
the <code>.draw()</code> method, so you can always start with plotnine
and then customize using Matplotlib.</p>
</li>
<li>
<p><a href="https://seaborn.pydata.org/" class="external-link"><strong>Seaborn:</strong></a>
Focusing on statistical graphics, there’s a variety of plot types that
will be simpler to make (require fewer lines of code) in seaborn. To
name a few: statistical representations of averages or of simple linear
regression models; plots of categorical data; multivariate plots, etc.
Refer to the <a href="https://seaborn.pydata.org/tutorial/introduction.html" class="external-link">introduction
to seaborn</a> to learn more.</p>
<p>For example, the following scatter plot which adds “sex” as a third
variable would require more lines of code if done with pandas +
Matplotlib alone.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>sns.scatterplot(data <span class="op">=</span> samples, x<span class="op">=</span><span class="st">'weight'</span>, y<span class="op">=</span><span class="st">'hindfoot_length'</span>,</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>              hue<span class="op">=</span><span class="st">'sex'</span>, alpha <span class="op">=</span> <span class="fl">0.2</span>)</span></code></pre>
</div>
<figure><img src="../fig/n002_seaborn.png" alt="A figure with three subplots: scatter, box, and histogram" class="figure mx-auto d-block"></figure>
</li>
<li>
<p><a href="https://plotly.com/python/" class="external-link"><strong>Plotly:</strong></a>
A tool to explore if you want web-based interactive visualizations where
you can hover over data points to get additional information or zoom in
to get a closer look. Plots can be displayed in Jupyter notebooks,
standalone HTML files, or be part of a web dashboard.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>fig <span class="op">=</span> px.scatter(data_frame<span class="op">=</span>samples, x<span class="op">=</span><span class="st">"weight"</span>, y<span class="op">=</span><span class="st">"hindfoot_length"</span>, </span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>               hover_data<span class="op">=</span><span class="st">"record_id"</span>)</span></code></pre>
</div>
</li>
</ul>
<iframe src="fig/n002_plotly_example.html" width="100%" height="600px" frameborder="0">
</iframe>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Load your required libraries into Python and use common
nicknames</li>
<li>Use pandas to load your data –<code>pd.read_csv()</code>– and to
explore it –<code>.head()</code>, <code>.tail()</code>, and
<code>.info()</code> methods.</li>
<li>The <code>.plot()</code> method on your DataFrame is a good plotting
starting point.</li>
<li>Matplotlib allows you to customize every aspect of your plot. Start
with the <code>plt.subplots()</code> function to create a figure object
and the number of axes (or subplots) you need.</li>
<li>Export plots to a file using the <code>.savefig()</code>
method.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-n003-data-structures"><p>Content from <a href="n003-data-structures.html">Exploring and understanding data</a></p>
<hr>
<p>Last updated on 2025-10-29 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/n003-data-structures.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 100 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I do exploratory data analysis in Python?</li>
<li>How do I get help when I am stuck?</li>
<li>What impact does an object’s type have on what I can do with
it?</li>
<li>How are expressions evaluated and values assigned to variables?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explore the structure and content of pandas dataframes</li>
<li>Convert data types and handle missing data</li>
<li>Interpret error messages and develop strategies to get help with
Python</li>
<li>Trace how Python assigns values to objects</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="the-pandas-dataframe">The pandas <code>DataFrame</code>
<a class="anchor" aria-label="anchor" href="#the-pandas-dataframe"></a>
</h2>
<hr class="half-width">
<p>We just spent quite a bit of time learning how to create
visualisations from the <code>samples</code> data, but we did not talk
much about what <code>samples</code> is. Let’s first load the data
again:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>samples <span class="op">=</span> pd.read_csv(<span class="st">'../data/surveys_complete_77_89.csv'</span>)</span></code></pre>
</div>
<p>You may remember that we loaded the data into Python with the
<code>pandas.read_csv</code> function. The output of
<code>read_csv</code> is a <em>data frame</em>: a common way of
representing tabular data in a programming language. To be precise,
<code>samples</code> is an <em>object</em> of <em>type</em>
<code>DataFrame</code>. In Python, pretty much everything you work with
is an object of some type. The <code>type</code> function can be used to
tell you the type of any object you pass to it.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="bu">type</span>(samples)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">pandas.core.frame.DataFrame</span></span></code></pre>
</div>
<p>This output tells us that the <code>DataFrame</code> object type is
defined by pandas, i.e. it is a special type of object not included in
the core functionality of Python.</p>
<div class="section level3">
<h3 id="exploring-data-in-a-dataframe">Exploring data in a dataframe<a class="anchor" aria-label="anchor" href="#exploring-data-in-a-dataframe"></a>
</h3>
<p>We encountered the <code>plot</code>, <code>head</code> and
<code>tail</code> methods in the previous epsiode. Dataframe objects
carry many other methods, including some that are useful when exploring
a dataset for the first time. Consider the output of
<code>describe</code>:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>samples.describe()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>              month           day 	       year       plot_id  hindfoot_length 	      weight
count  16878.000000  16878.000000  16878.000000  16878.000000     14145.000000  15186.000000
mean       6.382214     15.595805   1983.582119     11.471442        31.982114     53.216647
std        3.411215      8.428180      3.492428      6.865875        10.709841     44.265878
min        1.000000      1.000000   1977.000000      1.000000         6.000000      4.000000
25%        3.000000      9.000000   1981.000000      5.000000        21.000000     24.000000
50%        6.000000     15.000000   1983.000000     11.000000        35.000000     42.000000
75%        9.000000     23.000000   1987.000000     17.000000        37.000000     53.000000
max       12.000000     31.000000   1989.000000     24.000000        70.000000    278.000000</code></pre>
</div>
<p>These summary statistics give an immediate impression of the
distribution of the data. It is always worth performing an initial
“sniff test” with these: if there are major issues with the data or its
formatting, they may become apparent at this stage.</p>
<p><code>info</code> provides an overview of the columns included in the
dataframe:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>samples.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 16878 entries, 1 to 16878
Data columns (total 12 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   month            16878 non-null  int64
 1   day              16878 non-null  int64
 2   year             16878 non-null  int64
 3   plot_id          16878 non-null  int64
 4   species_id       16521 non-null  object
 5   sex              15578 non-null  object
 6   hindfoot_length  14145 non-null  float64
 7   weight           15186 non-null  float64
 8   genus            16521 non-null  object
 9   species          16521 non-null  object
 10  taxa             16521 non-null  object
 11  plot_type        16878 non-null  object
dtypes: float64(2), int64(4), object(6)
memory usage: 1.7+ MB</code></pre>
</div>
<p>We get quite a bit of useful information here too. First, we are told
that we have a <code>DataFrame</code> of 16878 entries, or rows, and 12
variables, or columns.</p>
<p>Next, we get a bit of information on each variable, including its
column title, a count of the <em>non-null</em> values (that is, values
that are not missing), and something called the <code>dtype</code> of
the column.</p>
</div>
<div class="section level3">
<h3 id="data-types">Data types<a class="anchor" aria-label="anchor" href="#data-types"></a>
</h3>
<p>The <code>dtype</code> property of a dataframe column describes the
<em>data type</em> of the values stored in that column. There are three
in the example above:</p>
<ul>
<li>
<code>int64</code>: this column contains integer (whole number)
values.</li>
<li>
<code>object</code>: this column contains string (non-numeric
sequence of characters) values.</li>
<li>
<code>float64</code>: this column contains “floating point” values
i.e. numeric values containing a decimal point.</li>
</ul>
<p>The <code>64</code> after <code>int</code> and <code>float</code>
represents the level of precision with which the values in the column
are stored in the computer’s memory. Other types with lower levels of
precision are available for numeric values, e.g. <code>int32</code> and
<code>float16</code>, which will take up less memory on your system but
limit the size and level of precision of the numbers they can store.</p>
<p>The <code>dtype</code> of a column is important because it determines
the kinds of operation that can be performed on the values in that
column. Let’s work with a couple of the columns independently to
demonstrate this.</p>
</div>
<div class="section level3">
<h3 id="the-series-object">The <code>Series</code> object<a class="anchor" aria-label="anchor" href="#the-series-object"></a>
</h3>
<p>To work with a single column of a dataframe, we can refer to it by
name in two different ways:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>samples[<span class="st">'species_id'</span>]</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>samples.species_id <span class="co"># this only works if there are no spaces in the column name (note the underscore used here)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
1        NL
2        NL
3        DM
4        DM
5        DM
         ..
16874    RM
16875    RM
16876    DM
16877    DM
16878    DM
Name: species_id, Length: 16878, dtype: object</code></pre>
</div>
<div id="tip-use-tab-completion-on-column-names" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tip-use-tab-completion-on-column-names" class="callout-inner">
<h3 class="callout-title">Tip: use tab completion on column names</h3>
<div class="callout-content">
<p>Tab completion, where you start typing the name of a variable,
function, etc before hitting <kbd>Tab</kbd> to auto-complete the rest,
also works on column names of a dataframe. Since this tab completion
saves time and reduces the chance of including typos, we recommend you
use it as frequently as possible.</p>
</div>
</div>
</div>
<p>The result of that operation is a <em>series</em> of data: a
one-dimensional sequence of values that all have the same
<code>dtype</code> (<code>object</code> in this case). Dataframe objects
are collections of the series “glued together” with a shared
<em>index</em>: the column of unique identifiers we associate with each
row. <code>record_id</code> is the index of the series summarised above;
the values carried by the series are <code>NL</code>, <code>DM</code>,
<code>AH</code>, etc (short species identification codes).</p>
<p>If we choose a different column of the dataframe, we get another
series with a different data type:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>samples[<span class="st">'weight'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
1         NaN
2         NaN
3         NaN
4         NaN
5         NaN
         ...
16874    15.0
16875     9.0
16876    31.0
16877    50.0
16878    42.0
Name: weight, Length: 16878, dtype: float64</code></pre>
</div>
<p>The data type of the series influences the things that can be done
with/to it. For example, sorting works differently for these two series,
with the numeric values in the <code>weight</code> series sorted from
largest to smallest and the character strings in <code>species_id</code>
sorted alphabetically:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>samples[<span class="st">'weight'</span>].sort_values()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
9790     4.0
5346     4.0
4052     4.0
9853     4.0
7084     4.0
        ...
16772    NaN
16777    NaN
16808    NaN
16846    NaN
16860    NaN
Name: weight, Length: 16878, dtype: float64</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>samples[<span class="st">'species_id'</span>].sort_values()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
12345     AB
9861      AB
10970     AB
10963     AB
5759      AB
        ...
16453    NaN
16454    NaN
16488    NaN
16489    NaN
16539    NaN
Name: species_id, Length: 16878, dtype: object</code></pre>
</div>
<p>This pattern of behaviour, where the type of an object determines
what can be done with it and influences how it is done, is a defining
characteristic of Python. As you gain more experience with the language,
you will become more familiar with this way of working with data. For
now, as you begin on your learning journey with the language, we
recommend using the <code>type</code> function frequently to make sure
that you know what kind of data/object you are working with, and do not
be afraid to ask for help whenever you are unsure or encounter a
problem.</p>
</div>
</section><section><h2 class="section-heading" id="aside-getting-help">Aside: Getting Help<a class="anchor" aria-label="anchor" href="#aside-getting-help"></a>
</h2>
<hr class="half-width">
<p>You may have already encountered several errors while following the
lesson and this is a good time to take a step back and discuss good
strategies to get help when something goes wrong.</p>
<div class="section level3">
<h3 id="the-built-in-help-function">The built-in <code>help</code> function<a class="anchor" aria-label="anchor" href="#the-built-in-help-function"></a>
</h3>
<p>Use <code>help</code> to view documentation for an object or
function. For example, if you want to see documentation for the
<code>round</code> function:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="bu">help</span>(<span class="bu">round</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on built-in function round in module builtins:

round(number, ndigits=None)
    Round a number to a given precision in decimal digits.

    The return value is an integer if ndigits is omitted or None.  Otherwise
    the return value has the same type as the number.  ndigits may be negative.</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="the-jupyter-notebook-has-two-ways-to-get-help-">The Jupyter Notebook has two ways to get help.<a class="anchor" aria-label="anchor" href="#the-jupyter-notebook-has-two-ways-to-get-help-"></a>
</h3>
<p>If you are working in Jupyter (Notebook or Lab), the platform offers
some additional ways to see documentation/get help:</p>
<ul>
<li>Option 1: Type the function name in a cell with a question mark
after it, e.g. <code>round?</code>. Then run the cell.</li>
<li>Option 2: (Not available on all systems) Place the cursor near where
the function is invoked in a cell (i.e., the function name or its
parameters),
<ul>
<li>Hold down <kbd>Shift</kbd>, and press <kbd>Tab</kbd>.</li>
<li>Do this several times to expand the information returned.</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="understanding-error-messages">Understanding error messages<a class="anchor" aria-label="anchor" href="#understanding-error-messages"></a>
</h3>
<p>The error messages returned when something goes wrong can be (very)
long but contain information about the problem, which can be very useful
once you know how to interpret it. For example, you might receive a
<code>SyntaxError</code> if you mistyped a line and the resulting code
was invalid:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Forgot to close the quote marks around the string.</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>name <span class="op">=</span> <span class="st">'Feng</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  Cell In[129], line 1
    name = 'Feng
           ^
SyntaxError: unterminated string literal (detected at line 1)</code></pre>
</div>
<p>There are three parts to this error message:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  Cell In[129], line 1</code></pre>
</div>
<p>This tells us where the error occured. This is of limited help in
Jupyter, since we know that the error is in the cell we just ran
(<code>Cell In[129]</code>), but the line number can be helpful
especially when the cell is quite long. But when running a larger
program written in Python, perhaps built up from multiple individual
scripts, this can be more useful, e.g.</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>  data_visualisation.py, line 42</code></pre>
</div>
<p>Next, we see a copy of the line where the error was encountered,
often annotated with an arrow pointing out exactly where Python thinks
the problem is:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>    name = 'Feng
           ^</code></pre>
</div>
<p>Python is not <em>exactly</em> right in this case: from context you
might be able to guess that the issue is really the lack of a closing
quotation mark at the end of the line. But an arrow pointing to the
opening quotation mark can give us a push in the right direction.
Sometimes Python gets these annotations exactly right. Occasionally, it
gets them completely wrong. In the vast majority of cases they are at
least somewhat helpful.</p>
<p>Finally, we get the error message itself:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>SyntaxError: unterminated string literal (detected at line 1)</code></pre>
</div>
<p>This always begins with a statement of the <em>type</em> of error
encountered: in this case, a <code>SyntaxError</code>. That provides a
broad categorisation for what went wrong. The rest of the message is a
description of exactly what the problem was from Python’s perspective.
Error messages can be loaded with jargon and quite difficult to
understand when you are first starting out. In this example,
<code>unterminated string literal</code> is a technical way of saying
“you opened some quotes, which I think means you were trying to define a
string value, but the quotes did not get closed before the end of the
line.”</p>
<p>It is normal not to understand exactly what these error messages mean
the first time you encounter them. Since programming involves making
lots of mistakes (for everyone!), you will start to become familiar with
many of them over time. As you continue learning, we recommend that you
ask others for help: more experienced programmers have made all of these
mistakes before you and will probably be better at spotting what has
gone wrong. (More on asking for help below.)</p>
<div class="section level4">
<h4 id="error-output-can-get-really-long">Error output can get really long!<a class="anchor" aria-label="anchor" href="#error-output-can-get-really-long"></a>
</h4>
<p>Especially when using functions from libraries you have imported into
your program, the middle part of the error message (the
<em>traceback</em>) can get rather long. For example, what happens if we
try to access a column that does not exist in our dataframe?</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>samples[<span class="st">'wegiht'</span>] <span class="co"># misspelling the 'weight' column name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
File ~/miniforge3/envs/carpentries/lib/python3.11/site-packages/pandas/core/indexes/base.py:3812, in Index.get_loc(self, key)
   3811 try:
-&gt; 3812     return self._engine.get_loc(casted_key)
   3813 except KeyError as err:

File pandas/_libs/index.pyx:167, in pandas._libs.index.IndexEngine.get_loc()

File pandas/_libs/index.pyx:196, in pandas._libs.index.IndexEngine.get_loc()

File pandas/_libs/hashtable_class_helper.pxi:7088, in pandas._libs.hashtable.PyObjectHashTable.get_item()

File pandas/_libs/hashtable_class_helper.pxi:7096, in pandas._libs.hashtable.PyObjectHashTable.get_item()

KeyError: 'wegiht'

The above exception was the direct cause of the following exception:

KeyError                                  Traceback (most recent call last)
Cell In[131], line 1
----&gt; 1 samples['wegiht']

File ~/miniforge3/envs/carpentries/lib/python3.11/site-packages/pandas/core/frame.py:4107, in DataFrame.__getitem__(self, key)
   4105 if self.columns.nlevels &gt; 1:
   4106     return self._getitem_multilevel(key)
-&gt; 4107 indexer = self.columns.get_loc(key)
   4108 if is_integer(indexer):
   4109     indexer = [indexer]

File ~/miniforge3/envs/carpentries/lib/python3.11/site-packages/pandas/core/indexes/base.py:3819, in Index.get_loc(self, key)
   3814     if isinstance(casted_key, slice) or (
   3815         isinstance(casted_key, abc.Iterable)
   3816         and any(isinstance(x, slice) for x in casted_key)
   3817     ):
   3818         raise InvalidIndexError(key)
-&gt; 3819     raise KeyError(key) from err
   3820 except TypeError:
   3821     # If we have a listlike key, _check_indexing_error will raise
   3822     #  InvalidIndexError. Otherwise we fall through and re-raise
   3823     #  the TypeError.
   3824     self._check_indexing_error(key)

KeyError: 'wegiht'</code></pre>
</div>
<p>(This is still relatively short compared to some errors messages we
have seen!)</p>
<p>When you encounter a long error like this one, do not panic! Our
advice is to focus on the first couple of lines and the last couple of
lines. Everything in the middle (as the name traceback suggests) is
retracing steps through the program, identifying where problems were
encountered along the way. That information is only really useful to
somebody interested in the inner workings of the pandas library, which
is well beyond the scope of this lesson! If we ignore everything in the
middle, the parts of the error message we want to focus on are:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)

[... skipping these parts ...]

KeyError: 'wegiht'</code></pre>
</div>
<p>This tells us that the problem is the “key”: the value we used to
lookup the column in the dataframe. Hopefully, the repetition of the
value we provided would be enough to help us realise our mistake.</p>
</div>
</div>
<div class="section level3">
<h3 id="other-ways-to-get-help">Other ways to get help<a class="anchor" aria-label="anchor" href="#other-ways-to-get-help"></a>
</h3>
<p>There are several other ways that people often get help when they are
stuck with their Python code.</p>
<ul>
<li>Search the internet: paste the last line of your error message or
the word “python” and a short description of what you want to do into
your favourite search engine and you will usually find several examples
where other people have encountered the same problem and came looking
for help.
<ul>
<li>
<a href="https://stackoverflow.com/questions" class="external-link">StackOverflow</a> can
be particularly helpful for this: answers to questions are presented as
a ranked thread ordered according to how useful other users found them
to be.</li>
<li>
<strong>Take care:</strong> copying and pasting code written by
somebody else is risky unless you understand exactly what it is
doing!</li>
</ul>
</li>
<li>ask somebody “in the real world”. If you have a colleague or friend
with more expertise in Python than you have, show them the problem you
are having and ask them for help.</li>
<li>Sometimes, the act of articulating your question can help you to
identify what is going wrong. This is known as <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging" class="external-link">“rubber duck
debugging”</a> among programmers.</li>
</ul>
<div class="section level4">
<h4 id="generative-ai">Generative AI<a class="anchor" aria-label="anchor" href="#generative-ai"></a>
</h4>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Choose how to teach this section </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>The section on generative AI is intended to be concise but
Instructors may choose to devote more time to the topic in a workshop.
Depending on your own level of experience and comfort with talking about
and using these tools, you could choose to do any of the following:</p>
<ul>
<li>Explain how large language models work and are trained, and/or the
difference between generative AI, other forms of AI that currently
exist, and the limits of what LLMs can do (e.g., they can’t
“reason”).</li>
<li>Demonstrate how you recommend that learners use generative AI.</li>
<li>Discuss the ethical concerns listed below, as well as others that
you are aware of, to help learners make an informed choice about whether
or not to use generative AI tools.</li>
</ul>
<p>This is a fast-moving technology. If you are preparing to teach this
section and you feel it has become outdated, please open an issue on the
lesson repository to let the Maintainers know and/or a pull request to
suggest updates and improvements.</p>
</div>
</div>
</div>
</div>
<p>It is increasingly common for people to use <em>generative AI</em>
chatbots such as ChatGPT to get help while coding. You will probably
receive some useful guidance by presenting your error message to the
chatbot and asking it what went wrong. However, the way this help is
provided by the chatbot is different. Answers on StackOverflow have
(probably) been given by a human as a direct response to the question
asked. But generative AI chatbots, which are based on an advanced
statistical model, respond by generating the <em>most likely</em>
sequence of text that would follow the prompt they are given.</p>
<p>While responses from generative AI tools can often be helpful, they
are not always reliable. These tools sometimes generate plausible but
incorrect or misleading information, so (just as with an answer found on
the internet) it is essential to verify their accuracy. You need the
knowledge and skills to be able to understand these responses, to judge
whether or not they are accurate, and to fix any errors in the code it
offers you.</p>
<p>In addition to asking for help, programmers can use generative AI
tools to generate code from scratch; extend, improve and reorganise
existing code; translate code between programming languages; figure out
what terms to use in a search of the internet; and more. However, there
are drawbacks that you should be aware of.</p>
<p>The models used by these tools have been “trained” on very large
volumes of data, much of it taken from the internet, and the responses
they produce reflect that training data, and may recapitulate its
inaccuracies or biases. The environmental costs (energy and water use)
of LLMs are a lot higher than other technologies, both during
development (known as training) and when an individual user uses one
(also called inference). For more information see the <a href="https://huggingface.co/blog/sasha/ai-environment-primer" class="external-link">AI
Environmental Impact Primer</a> developed by researchers at HuggingFace,
an AI hosting platform. Concerns also exist about the way the data for
this training was obtained, with questions raised about whether the
people developing the LLMs had permission to use it. Other ethical
concerns have also been raised, such as reports that workers were
exploited during the training process.</p>
<p><strong>We recommend that you avoid getting help from generative AI
during the workshop</strong> for several reasons:</p>
<ol style="list-style-type: decimal">
<li>For most problems you will encounter at this stage, help and answers
can be found among the first results returned by searching the
internet.</li>
<li>The foundational knowledge and skills you will learn in this lesson
by writing and fixing your own programs are essential to be able to
evaluate the correctness and safety of any code you receive from online
help or a generative AI chatbot. If you choose to use these tools in the
future, the expertise you gain from learning and practising these
fundamentals on your own will help you use them more effectively.</li>
<li>As you start out with programming, the mistakes you make will be the
kinds that have also been made – and overcome! – by everybody else who
learned to program before you. Since these mistakes and the questions
you are likely to have at this stage are common, they are also better
represented than other, more specialised problems and tasks in the data
that was used to train generative AI tools. This means that a generative
AI chatbot is <em>more likely to produce accurate responses</em> to
questions that novices ask, which could give you a false impression of
how reliable they will be when you are ready to do things that are more
advanced.</li>
</ol>
</div>
</div>
</section><section><h2 class="section-heading" id="data-input-within-python">Data input within Python<a class="anchor" aria-label="anchor" href="#data-input-within-python"></a>
</h2>
<hr class="half-width">
<p>Although it is more common (and faster) to input data in another
format e.g. a spreadsheet and read it in, Series and DataFrame objects
can be created directly within Python. Before we can make a new Series,
we need to learn about another type of data in Python: the list.</p>
<div class="section level3">
<h3 id="lists">Lists<a class="anchor" aria-label="anchor" href="#lists"></a>
</h3>
<p>Lists are one of the standard <em>data structures</em> built into
Python. A data structure is an object that contains more than one piece
of information. (DataFrames and Series are also data structures.) The
list is designed to contain multiple values in an ordered sequence: they
are a great choice if you want to build up and modify a collection of
values over time and/or handle each of those values one at a time. We
can create a new list in Python by capturing the values we want it to
store inside square brackets <code>[]</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>years_list <span class="op">=</span> [<span class="dv">2020</span>, <span class="dv">2025</span>, <span class="dv">2010</span>]</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>years_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2020, 2025, 2010]</code></pre>
</div>
<p>New values can be added to the end of a list with the
<code>append</code> method:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>years_list.append(<span class="dv">2015</span>)</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>years_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2020, 2025, 2010, 2015]</code></pre>
</div>
<div id="exploring-list-methods" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exploring-list-methods" class="callout-inner">
<h3 class="callout-title">Exploring list methods</h3>
<div class="callout-content">
<p>The <code>append</code> method allows us to add a value to the end of
a list but how could we insert a new value into a given position
instead? Applying what you have learned about how to find out the
methods that an object has, can you figure out how to place the value
<code>2019</code> into the third position in <code>years_list</code>
(shifting the values after it up one more position)? Recall that the
indexing used to specify positions in a sequence begins at 0 in
Python.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Using tab completion, the <code>help</code> function, or looking up
the documentation online, we can discover the <code>insert</code> method
and learn how it works. <code>insert</code> takes two arguments: the
position for the new list entry and the value to be placed in that
position:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>years_list.insert(<span class="dv">2</span>, <span class="dv">2019</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>years_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2020, 2025, 2019, 2010, 2015]</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Among many other methods is <code>sort</code>, which can be used to
sort the values in the list:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>years_list.sort()</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>years_list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[2010, 2015, 2019, 2020, 2025]</code></pre>
</div>
<p>The easiest way to create a new Series is with a list:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>years_series <span class="op">=</span> pd.Series(years_list)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>years_series</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0    2010
1    2015
2    2019
3    2020
4    2025
dtype: int64</code></pre>
</div>
<p>With the data in a Series, we can no longer do some of the things we
were able to do with the list, such as adding new values. But we do gain
access to some new possibilities, which can be very helpful. For
example, if we wanted to increase all of the values by 1000, this would
be easy with a Series but more complicated with a list:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>years_series <span class="op">+</span> <span class="dv">1000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0    3010
1    3015
2    3019
3    3020
4    3025
dtype: int64</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>years_list <span class="op">+</span> <span class="dv">1000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
Cell In[126], line 1
----&gt; 1 years_list + 1000

TypeError: can only concatenate list (not "int") to list</code></pre>
</div>
<p>This illustrates an important principle of Python: different data
structures are suitable for different “modes” of working with data. It
can be helpful to work with a list when building up an initial set of
data from scratch, but when you are ready to begin operating on that
dataset as a whole (performing calculations with it, visualising it,
etc), you will be rewarded for switching to a more specialised datatype
like a Series or DataFrame from pandas.</p>
</div>
</section><section><h2 class="section-heading" id="unexpected-data-types">Unexpected data types<a class="anchor" aria-label="anchor" href="#unexpected-data-types"></a>
</h2>
<hr class="half-width">
<p>Operations like the addition of 1000 we performed on
<code>years_series</code> work because pandas knows how to add a number
to the integer values in the series. That behaviour is determind by the
<code>dtype</code> of the series, which makes that <code>dtype</code>
really important for how you want to work with your data. Let’s explore
how the <code>dtype</code> is chosen. Returning to the
<code>years_series</code> object we created above:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>years_series</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0    2010
1    2015
2    2019
3    2020
4    2025
dtype: int64</code></pre>
</div>
<p>The <code>dtype: int64</code> was determined automatically based on
the values passed in. But what if the values provided are of several
different types?</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>ages_series <span class="op">=</span> pd.Series([<span class="dv">2</span>, <span class="dv">3</span>, <span class="fl">5.5</span>, <span class="dv">6</span>, <span class="dv">8</span>])</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>ages_series</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0    2.0
1    3.0
2    5.5
3    6.0
4    8.0
dtype: float64</code></pre>
</div>
<p>Pandas assigns a <code>dtype</code> that allows it to account for all
of the values it is given, converting some values to another
<code>dtype</code> if needed, in a process called <em>coercion</em>. In
the case above, all of the integer values were coerced to floating point
numbers to account for the <code>5.5</code>.</p>
<div id="exercise-coercion" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-coercion" class="callout-inner">
<h3 class="callout-title">Exercise: Coercion</h3>
<div class="callout-content">
<p>Can you guess the <code>dtype</code> of each series created below?
Run the code to check whether you were right.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a>int_str <span class="op">=</span> pd.Series([<span class="dv">1</span>, <span class="st">'two'</span>, <span class="dv">3</span>])</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>str_flt <span class="op">=</span> pd.Series([<span class="st">'four'</span>, <span class="fl">5.0</span>, <span class="st">'six'</span>])</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a>int_str</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0      1
1    two
2      3
dtype: object</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a>str_flt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0   four
1    5.0
2    six
dtype: object</code></pre>
</div>
<p>In both cases, the numeric values are coerced into strings. When
automatically coercing values between types like this, Python aims to
minimise the amount of information lost.</p>
</div>
</div>
</div>
</div>
<p>In practice, it is much more common to read data from elsewhere
(e.g. with <code>read_csv</code>) than to enter it manually within
Python. When reading data from a file, pandas tries to guess the
appropriate <code>dtype</code> to assign to each column (series) of the
dataframe. This is usually very helpful but the process is sensitive to
inconsistencies and data entry errors in the input: a stray character in
one cell can cause an entire column to be coerced to a different
<code>dtype</code> than you might have wanted.</p>
<p>For example, if the raw data includes a symbol added by a typo
mistake (<code>=</code> instead of <code>-</code>):</p>
<pre class="csv"><code>name,latitude,longitude
Superior,47.7,-87.5
Victoria,-1.0,33.0
Tanganyika,=6.0,29.3</code></pre>
<p>We see a non-numeric <code>dtype</code> for the latitude column
(<code>object</code>) when we load the data into a dataframe.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>lakes <span class="op">=</span> pd.read_csv(<span class="st">'../data/lakes.csv'</span>)</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="bu">print</span>(lakes)</span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>lakes.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 3 entries, 0 to 2
Data columns (total 3 columns):
 #   Column     Non-Null Count  Dtype
---  ------     --------------  -----
 0   name       3 non-null      object
 1   latitude   3 non-null      object
 2   longitude  3 non-null      float64
dtypes: float64(1), object(2)
memory usage: 200.0+ bytes</code></pre>
</div>
<p>It is a good idea to run the <code>info</code> method on a new
dataframe after you have loaded data for the first time: if one or more
of the columns has a different <code>dtype</code> than you expected,
this may be a signal that you need to clean up the raw data.</p>
<div class="section level3">
<h3 id="recasting">Recasting<a class="anchor" aria-label="anchor" href="#recasting"></a>
</h3>
<p>A column can be manually coerced (or <em>recast</em>) into a
different <code>dtype</code>, provided that pandas knows how to handle
that conversion. For example, the integer values in the
<code>plot_id</code> column of our dataframe can be converted to
floating point numbers:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>samples[<span class="st">'plot_id'</span>] <span class="op">=</span> samples[<span class="st">'plot_id'</span>].astype(<span class="st">'float'</span>)</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>samples[<span class="st">'plot_id'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
record_id
1         2.0
2         3.0
3         2.0
4         7.0
5         3.0
         ...
16874    16.0
16875     5.0
16876     4.0
16877    11.0
16878     8.0
Name: plot_id, Length: 16878, dtype: float64</code></pre>
</div>
<p>But the string values of <code>species_id</code> cannot be converted
to numeric data:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a>samples.species_id <span class="op">=</span> samples[<span class="st">'species_id'</span>].astype(<span class="st">'int'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
Cell In[101], line 1
----&gt; 1 samples.species_id = samples.species_id.astype('int64')

File ~/miniforge3/envs/carpentries/lib/python3.11/site-packages/pandas/core/generic.py:6662, in NDFrame.astype(self, dtype, copy, errors)
   6656     results = [
   6657         ser.astype(dtype, copy=copy, errors=errors) for _, ser in self.items()
   6658     ]
   6660 else:
   6661     # else, only a single dtype is given
-&gt; 6662     new_data = self._mgr.astype(dtype=dtype, copy=copy, errors=errors)
   6663     res = self._constructor_from_mgr(new_data, axes=new_data.axes)
   6664     return res.__finalize__(self, method="astype")

[... a lot more lines of traceback ...]

File ~/miniforge3/envs/carpentries/lib/python3.11/site-packages/pandas/core/dtypes/astype.py:133, in _astype_nansafe(arr, dtype, copy, skipna)
    129     raise ValueError(msg)
    131 if copy or arr.dtype == object or dtype == object:
    132     # Explicit copy, or required since NumPy can't view from / to object.
--&gt; 133     return arr.astype(dtype, copy=True)
    135 return arr.astype(dtype, copy=copy)

ValueError: invalid literal for int() with base 10: 'NL'</code></pre>
</div>
<div id="changing-types" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="changing-types" class="callout-inner">
<h3 class="callout-title">Changing Types</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Convert the values in the column <code>plot_id</code> back to
integers.</li>
<li>Now try converting <code>weight</code> to an integer. What goes
wrong here? What is pandas telling you? We will talk about some
solutions to this later.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>samples[<span class="st">'plot_id'</span>].astype(<span class="st">'int'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>record_id
1         2
2         3
3         2
4         7
5         3
         ..
16874    16
16875     5
16876     4
16877    11
16878     8
Name: plot_id, Length: 16878, dtype: int64</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>samples[<span class="st">'weight'</span>].astype(<span class="st">'int'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>pandas.errors.IntCastingNaNError: Cannot convert non-finite values (NA or inf) to integer</code></pre>
</div>
<p>Pandas cannot convert types from float to int if the column contains
missing values.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h3>
<p>In addition to data entry errors, it is common to encounter missing
values in large volumns of data. A value may be missing because it was
not possible to make a complete observation, because data was lost, or
for any number of other reasons. It is important to consider missing
values while processing data because they can influence downstream
analysis – that is, data analysis that will be done later – in unwanted
ways when not handled correctly.</p>
<p>Depending on the <code>dtype</code> of the column/series, missing
values may appear as <code>NaN</code> (<em>“Not a Number”</em>),
<code>NA</code>, <code>&lt;NA&gt;</code>, or <code>NaT</code> (<em>“Not
a Time”</em>). You may have noticed some during our initial exploration
of the dataframe. (Note the <code>NaN</code> values in the first five
rows of the <code>weight</code> column below.)</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>samples.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           month  day  year  plot_id  species_id  sex  hindfoot_length  weight      genus   species    taxa                 plot_type
record_id 												
1              7   16  1977        2          NL    M             32.0     NaN    Neotoma  albigula  Rodent                   Control
2              7   16  1977        3          NL    M             33.0     NaN    Neotoma  albigula  Rodent  Long-term Krat Exclosure
3              7   16  1977        2          DM    F             37.0     NaN  Dipodomys  merriami  Rodent                   Control
4              7   16  1977        7          DM    M             36.0     NaN  Dipodomys  merriami  Rodent          Rodent Exclosure
5              7   16  1977        3          DM    M             35.0     NaN  Dipodomys  merriami  Rodent  Long-term Krat Exclosure</code></pre>
</div>
<p>The output of the <code>info</code> method includes a count of the
<em>non-null</em> values – that is, the values that are <em>not</em>
missing – for each column:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a>samples.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 16878 entries, 1 to 16878
Data columns (total 12 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   month            16878 non-null  int64
 1   day              16878 non-null  int64
 2   year             16878 non-null  int64
 3   plot_id          16878 non-null  int64
 4   species_id       16521 non-null  object
 5   sex              15578 non-null  object
 6   hindfoot_length  14145 non-null  float64
 7   weight           15186 non-null  float64
 8   genus            16521 non-null  object
 9   species          16521 non-null  object
 10  taxa             16521 non-null  object
 11  plot_type        16878 non-null  object
dtypes: float64(2), int64(4), object(6)
memory usage: 1.7+ MB</code></pre>
</div>
<p>From this output we can tell that almost 1700 weight measurements and
more than 2700 hindfoot length measurements are missing. Many of the
other columns also have missing values.</p>
<p>The ouput above demonstrates that pandas can distinguish these
<code>NaN</code> values from the actual data and indeed they will be
ignored for some tasks, such as calculation of the summary statistics
provided by <code>describe</code>.</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>samples.describe()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>              month           day 	       year       plot_id  hindfoot_length 	      weight
count  16878.000000  16878.000000  16878.000000  16878.000000     14145.000000  15186.000000
mean       6.382214     15.595805   1983.582119     11.471442        31.982114     53.216647
std        3.411215      8.428180      3.492428      6.865875        10.709841     44.265878
min        1.000000      1.000000   1977.000000      1.000000         6.000000      4.000000
25%        3.000000      9.000000   1981.000000      5.000000        21.000000     24.000000
50%        6.000000     15.000000   1983.000000     11.000000        35.000000     42.000000
75%        9.000000     23.000000   1987.000000     17.000000        37.000000     53.000000
max       12.000000     31.000000   1989.000000     24.000000        70.000000    278.000000</code></pre>
</div>
<p>In some circumstances, like the recasting we attempted in the
previous exercise, the missing values can cause trouble. It is up to us
to decide how best to handle those missing values. We could remove the
rows containing missing data, accepting the loss of all data for that
observation:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>samples.dropna().head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           month  day  year  plot_id species_id sex  hindfoot_length  weight      genus   species    taxa                 plot_type
record_id
63             8   19  1977        3         DM   M             35.0    40.0  Dipodomys  merriami  Rodent  Long-term Krat Exclosure
64             8   19  1977        7         DM   M             37.0    48.0  Dipodomys  merriami  Rodent          Rodent Exclosure
65             8   19  1977        4         DM   F             34.0    29.0  Dipodomys  merriami  Rodent                   Control
66             8   19  1977        4         DM   F             35.0    46.0  Dipodomys  merriami  Rodent                   Control
67             8   19  1977        7         DM   M             35.0    36.0  Dipodomys  merriami  Rodent          Rodent Exclosure</code></pre>
</div>
<p>But we should take note that this removes more than 3000 rows from
the dataframe!</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="bu">len</span>(samples)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">16878</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a><span class="bu">len</span>(samples.dropna())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">13773</span></span></code></pre>
</div>
<p>Instead, we could <em>fill</em> all of the missing values with
something else. For example, let’s make a copy of the
<code>samples</code> dataframe then populate the missing values in the
<code>weight</code> column of that copy with the mean of all the
non-missing weights. There are a few parts to that operation, which are
tackled one at a time below.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a>mean_weight <span class="op">=</span> samples[<span class="st">'weight'</span>].mean() <span class="co"># the 'mean' method calculates the mean of the non-null values in the column</span></span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a>df1 <span class="op">=</span> samples.copy() <span class="co"># making a copy to work with so that we do not edit our original data</span></span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a>df1[<span class="st">'weight'</span>] <span class="op">=</span> df1[<span class="st">'weight'</span>].fillna(mean_weight) <span class="co"># the 'fillna' method fills all missing values with the provided value</span></span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a>df1.head()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>           month  day  year  plot_id species_id sex  hindfoot_length     weight      genus   species    taxa                 plot_type
record_id
1              7   16  1977        2         NL   M             32.0  53.216647    Neotoma  albigula  Rodent                   Control
2              7   16  1977        3         NL   M             33.0  53.216647    Neotoma  albigula  Rodent  Long-term Krat Exclosure
3              7   16  1977        2         DM   F             37.0  53.216647  Dipodomys  merriami  Rodent                   Control
4              7   16  1977        7         DM   M             36.0  53.216647  Dipodomys  merriami  Rodent          Rodent Exclosure
5              7   16  1977        3         DM   M             35.0  53.216647  Dipodomys  merriami  Rodent  Long-term Krat Exclosure</code></pre>
</div>
<p>The choice to fill in these missing values rather than removing the
rows that contain them can have implications for the result of your
analysis. It is important to consider your approach carefully. Think
about how the data will be used and how these values will impact the
scientific conclusions made from the analysis. pandas gives us all of
the tools that we need to account for these issues. But we need to be
cautious about how the decisions that we make impact scientific
results.</p>
</div>
</section><section><h2 class="section-heading" id="assignment-evaluation-and-mutability">Assignment, evaluation, and mutability<a class="anchor" aria-label="anchor" href="#assignment-evaluation-and-mutability"></a>
</h2>
<hr class="half-width">
<p>Stepping away from dataframes for a moment, the time has come to
explore the behaviour of Python a little more.</p>
<div id="exercise-variable-assignments" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-variable-assignments" class="callout-inner">
<h3 class="callout-title">Exercise: variable assignments</h3>
<div class="callout-content">
<p>What is the value of <code>y</code> after running the following
lines?</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a>y <span class="op">=</span> x<span class="op">*</span><span class="dv">3</span></span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">10</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>y <span class="op">=</span> x<span class="op">*</span><span class="dv">3</span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>y</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">6</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Understanding what’s going on here will help you avoid a lot of
confusion when working in Python. When we assign something to a
variable, the first thing that happens is the righthand side gets
<em>evaluated</em>. So when we first ran the line <code>y = x*3</code>,
<code>x*3</code> first gets evaluated to the value of 6, and this gets
assigned to <code>y</code>. The variables <code>x</code> and
<code>y</code> are independent objects, so when we change the value of
<code>x</code> to 10, <code>y</code> is unaffected. This behaviour may
be different to what you are used to, e.g. from experience working with
data in spreadsheets where cells can be linked such that modifying the
value in one cell triggers changes in others.</p>
<p>Multiple evaluations can take place in a single line of Python code
and learning to trace the order and impact of these evaluations is a key
skill.</p>
<div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>y <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">3</span><span class="op">-</span>(x<span class="op">/</span>y)</span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a>z</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1.0</span></span></code></pre>
</div>
<p>In the example above, <code>x/y</code> is evaluated first before the
result is subtracted from 3 and the final calculated value is assigned
to <code>z</code>. (The brackets <code>()</code> are not needed in the
calculation above but are included to make the order of evaluation
clearer.) Python makes each evaluation as it needs to in order to
proceed with the next, before assigning the final result to the variable
on the lefthand side of the <code>=</code> operator.</p>
<p>This means that we could have filled the missing values in the weight
column of our dataframe copy in a single line:</p>
<div class="codewrapper sourceCode" id="cb81">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a>df1[<span class="st">'weight'</span>] <span class="op">=</span> df1[<span class="st">'weight'</span>].fillna(df1[<span class="st">'weight'</span>].mean())</span></code></pre>
</div>
<p>First, the mean weight is calculated
(<code>df1['weight'].mean()</code> is evaluated). Then the result of
that evaluation is passed into <code>fillna</code> and the result of the
filling operation
(<code>df1['weight'].fillna(&lt;RESULT OF PREVIOUS&gt;)</code>) is
assigned to <code>df1['weight']</code>.</p>
<div class="section level4">
<h4 id="variable-naming">Variable naming<a class="anchor" aria-label="anchor" href="#variable-naming"></a>
</h4>
<p>You are going to name a lot of variables in Python! There are some
rules you have to stick to when doing so, as well as recommendations
that will make your life easier.</p>
<ul>
<li>Make names clear without being too long
<ul>
<li>
<code>wkg</code> is probably too short.</li>
<li>
<code>weight_in_kilograms</code> is probably too long.</li>
<li>
<code>weight_kg</code> is good.</li>
</ul>
</li>
<li>Names cannot begin with a number.</li>
<li>Names cannot contain spaces; use underscores instead.</li>
<li>Names are case sensitive: <code>weight_kg</code> is a different name
from <code>Weight_kg</code>. Avoid uppercase characters at the beginning
of variable names.</li>
<li>Names cannot contain most non-letter characters:
<code>+&amp;-/*.</code> etc.</li>
<li>Two common formats of variable name are <code>snake_case</code> and
<code>camelCase</code>. A third “case” of naming convention,
<code>kebab-case</code>, is not allowed in Python (see the rule
above).</li>
<li>Aim to be consistent in how you name things within your projects. It
is easier to follow an established style guide, such as <a href="https://google.github.io/styleguide/pyguide.html" class="external-link">Google’s</a>,
than to come up with your own.</li>
</ul>
<div id="exercise-good-variable-names" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-good-variable-names" class="callout-inner">
<h3 class="callout-title">Exercise; good variable names</h3>
<div class="callout-content">
<p>Identify at least one good variable name and at least one variable
name that could be improved in this episode. Refer to the rules and
recommendations listed above to suggest how these variable names could
be better.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p><code>mean_weight</code> and <code>samples</code> are examples of
reasonably good variable names: they are relatively short yet
descriptive.</p>
<p><code>df2</code> is not descriptive enough and could be potentially
confusing if encountered by somebody else/ourselves in a few weeks’
time. The name could be improved by making it more descriptive,
e.g. <code>samples_duplicate</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="mutability">Mutability<a class="anchor" aria-label="anchor" href="#mutability"></a>
</h4>
<p>Why did we need to use the <code>copy</code> method to duplicate the
dataframe above if variables are not linked to each other? Why not
assign a new variable with the value of the existing dataframe
object?</p>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a>df2 <span class="op">=</span> samples</span></code></pre>
</div>
<p>This gets to <em>mutablity</em>: a feature of Python that has caused
headaches for many novices in the past! In the interests of memory
management, Python avoids making copies of objects unless it has to.
Some types of objects are <em>immutable</em>, meaning that their value
cannot be modified once set. Immutable object types we have already
encountered include strings, integers, and floats. If we want to adjust
the value of an integer variable, we must explicitly overwrite it.</p>
<p>Other types of object are <em>mutable</em>, meaning that their value
can be changed “in-place” without needing to be explictly overwritten.
This includes lists <strong>and pandas <code>DataFrame</code>
objects</strong>, which can be reordered etc. after they are
created.</p>
<p>When a new variable is assigned the value of an existing
<strong>immutable</strong> object, Python duplicates the value and
assigns it to the new variable.</p>
<pre><code><span><span class="va">a</span> <span class="op">=</span> <span class="fl">3.5</span> <span class="co"># new float object, called "a"</span></span>
<span><span class="va">b</span> <span class="op">=</span> <span class="va">a</span>   <span class="co"># another new float object, called "b", which also has the value 3.5</span></span></code></pre>
<p>When a new variable is assigned the value of an existing
<strong>mutable</strong> object, Python makes a new “pointer” towards
the value of the existing object instead of duplicating it.</p>
<pre><code>some_species = ['NL', 'DM', 'PF', 'PE', 'DS'] # new list object, called "some_species"
some_more_species = some_species # another name for the same list object</code></pre>
<p>This can have unintended consequences and lead to much confusion!</p>
<pre><code><span><span class="va">some_more_species</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">=</span> <span class="st">'CV'</span></span>
<span><span class="va">some_species</span></span></code></pre>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['NL', 'DM', 'CV', 'PE', 'DS']</code></pre>
</div>
<p>As you can see here, the “PV” value was replaced by “CV” in both
lists, even if we didn’t intend to make the change in the
<code>some_species</code> list.</p>
<p>This takes practice and time to get used to. The key thing to
remember is that <strong>you should use the <code>copy</code> method to
make a copy of your dataframes</strong> to avoid accidentally modifying
the data in the original.</p>
<div class="codewrapper sourceCode" id="cb87">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a>df2 <span class="op">=</span> samples.copy()</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="groups-in-pandas">Groups in Pandas<a class="anchor" aria-label="anchor" href="#groups-in-pandas"></a>
</h2>
<hr class="half-width">
<p>We often want to calculate summary statistics grouped by subsets or
attributes within fields of our data. For example, we might want to
calculate the average weight of all individuals per site.</p>
<p>We can calculate basic statistics for all records in a single column
using the syntax below:</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" tabindex="-1"></a>samples[<span class="st">'weight'</span>].describe()</span></code></pre>
</div>
<p>gives <strong>output</strong></p>
<div class="codewrapper sourceCode" id="cb89">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a>count    <span class="fl">15186.000000</span></span>
<span id="cb89-2"><a href="#cb89-2" tabindex="-1"></a>mean        <span class="fl">53.216647</span></span>
<span id="cb89-3"><a href="#cb89-3" tabindex="-1"></a>std         <span class="fl">44.265878</span></span>
<span id="cb89-4"><a href="#cb89-4" tabindex="-1"></a><span class="bu">min</span>          <span class="fl">4.000000</span></span>
<span id="cb89-5"><a href="#cb89-5" tabindex="-1"></a><span class="dv">25</span><span class="op">%</span>         <span class="fl">24.000000</span></span>
<span id="cb89-6"><a href="#cb89-6" tabindex="-1"></a><span class="dv">50</span><span class="op">%</span>         <span class="fl">42.000000</span></span>
<span id="cb89-7"><a href="#cb89-7" tabindex="-1"></a><span class="dv">75</span><span class="op">%</span>         <span class="fl">53.000000</span></span>
<span id="cb89-8"><a href="#cb89-8" tabindex="-1"></a><span class="bu">max</span>        <span class="fl">278.000000</span></span>
<span id="cb89-9"><a href="#cb89-9" tabindex="-1"></a>Name: weight, dtype: float64</span></code></pre>
</div>
<p>We can also extract one specific metric if we wish:</p>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" tabindex="-1"></a>samples[<span class="st">'weight'</span>].<span class="bu">min</span>()</span>
<span id="cb90-2"><a href="#cb90-2" tabindex="-1"></a>samples[<span class="st">'weight'</span>].<span class="bu">max</span>()</span>
<span id="cb90-3"><a href="#cb90-3" tabindex="-1"></a>samples[<span class="st">'weight'</span>].mean()</span>
<span id="cb90-4"><a href="#cb90-4" tabindex="-1"></a>samples[<span class="st">'weight'</span>].std()</span>
<span id="cb90-5"><a href="#cb90-5" tabindex="-1"></a>samples[<span class="st">'weight'</span>].count()</span></code></pre>
</div>
<p>But if we want to summarize by one or more variables, for example
sex, we can use <strong>Pandas’ <code>.groupby</code> method</strong>.
Once we’ve created a groupby DataFrame, we can quickly calculate summary
statistics by a group of our choice.</p>
<div class="codewrapper sourceCode" id="cb91">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a><span class="co"># Group data by sex</span></span>
<span id="cb91-2"><a href="#cb91-2" tabindex="-1"></a>grouped_data <span class="op">=</span> samples.groupby(<span class="st">'sex'</span>)</span></code></pre>
</div>
<p>The <strong>pandas function <code>describe</code></strong> will
return descriptive stats including: mean, median, max, min, std and
count for a particular column in the data. Pandas’ <code>describe</code>
function will only return summary values for columns containing numeric
data.</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" tabindex="-1"></a><span class="co"># Summary statistics for all numeric columns by sex</span></span>
<span id="cb92-2"><a href="#cb92-2" tabindex="-1"></a>grouped_data.describe()</span>
<span id="cb92-3"><a href="#cb92-3" tabindex="-1"></a><span class="co"># Provide the mean for each numeric column by sex</span></span>
<span id="cb92-4"><a href="#cb92-4" tabindex="-1"></a>grouped_data.mean(numeric_only<span class="op">=</span><span class="va">True</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id     month        day         year    plot_id  \
sex
F    8371.632960  6.475266  15.411998  1983.520361  11.418147
M    8553.106416  6.306295  15.763317  1983.679177  11.248305

     hindfoot_length     weight
sex
F           31.83258  53.114471
M           32.13352  53.164464
</code></pre>
</div>
<p>The <code>groupby</code> command is powerful in that it allows us to
quickly generate summary stats.</p>
<div id="challenge---summary-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---summary-data" class="callout-inner">
<h3 class="callout-title">Challenge - Summary Data</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>How many recorded individuals are female <code>F</code> and how many
male <code>M</code>?</li>
<li>What happens when you group by two columns using the following
syntax and then calculate mean values?</li>
</ol>
<ul>
<li><code>grouped_data2 = samples.groupby(['plot_id', 'sex'])</code></li>
<li><code>grouped_data2.mean(numeric_only=True)</code></li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Summarize weight values for each site in your data. HINT: you can
use the following syntax to only create summary statistics for one
column in your data. <code>by_site['weight'].describe()</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>The first column of output from <code>grouped_data.describe()</code>
(count) tells us that the data contains 15690 records for female
individuals and 17348 records for male individuals.
<ul>
<li>Note that these two numbers do not sum to 35549, the total number of
rows we know to be in the <code>samples</code> DataFrame. Why do you
think some records were excluded from the grouping?</li>
</ul>
</li>
<li>Calling the <code>mean()</code> method on data grouped by these two
columns calculates and returns the mean value for each combination of
plot and sex.
<ul>
<li>Note that the mean is not meaningful for some variables, e.g. day,
month, and year. You can specify particular columns and particular
summary statistics using the <code>agg()</code> method (short for
<em>aggregate</em>), e.g. to obtain the last survey year, median
foot-length and mean weight for each plot/sex combination:</li>
</ul>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" tabindex="-1"></a>samples.groupby([<span class="st">'plot_id'</span>, <span class="st">'sex'</span>]).agg({<span class="st">"year"</span>: <span class="st">'max'</span>,</span>
<span id="cb94-2"><a href="#cb94-2" tabindex="-1"></a>                                           <span class="st">"hindfoot_length"</span>: <span class="st">'median'</span>,</span>
<span id="cb94-3"><a href="#cb94-3" tabindex="-1"></a>                                           <span class="st">"weight"</span>: <span class="st">'mean'</span>})</span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li><code>samples.groupby(['plot_id'])['weight'].describe()</code></li>
</ol>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>          count       mean        std  min   25%   50%     75%    max
plot_id
1         909.0  65.974697  45.807013  4.0  39.0  46.0   99.00  223.0
2         962.0  59.911642  50.234865  5.0  31.0  44.0   55.00  278.0
3         641.0  38.338534  50.623079  4.0  11.0  20.0   34.00  250.0
4         828.0  62.647343  41.208190  4.0  37.0  45.0  102.00  200.0
5         788.0  47.864213  36.739691  5.0  28.0  42.0   50.00  248.0
6         686.0  49.180758  36.620356  5.0  25.0  42.0   52.00  243.0
7         257.0  25.101167  31.649778  4.0  11.0  19.0   24.00  235.0
8         736.0  64.593750  43.420011  5.0  39.0  48.0  102.25  178.0
9         893.0  65.346025  41.928699  6.0  40.0  48.0   99.00  275.0
10        159.0  21.188679  25.744403  4.0  10.0  12.0   24.50  237.0
11        905.0  50.260773  37.034074  5.0  29.0  42.0   49.00  212.0
12       1086.0  55.978821  45.675559  7.0  31.0  44.0   53.00  264.0
13        647.0  56.316847  42.464628  5.0  30.5  44.0   54.00  241.0
14        798.0  52.909774  33.993126  5.0  38.0  45.0   51.00  216.0
15        357.0  35.011204  47.396960  4.0  10.0  19.0   33.00  259.0
16        232.0  26.185345  22.040403  4.0  11.0  20.0   40.00  158.0
17        788.0  59.426396  44.751988  4.0  30.0  45.0   61.25  216.0
18        690.0  56.000000  44.368296  5.0  29.0  42.0   53.00  256.0
19        369.0  19.059621  15.320905  4.0   9.0  15.0   23.00  139.0
20        662.0  65.531722  53.234713  6.0  30.0  44.0  110.75  223.0
21        342.0  24.964912  32.230001  4.0   8.0  12.0   27.00  190.0
22        611.0  70.163666  45.955603  5.0  37.0  48.0  118.00  212.0
23        209.0  21.502392  19.647158  4.0  10.0  16.0   24.00  131.0
24        631.0  50.123613  47.017531  4.0  23.0  40.0   47.00  251.0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="quickly-creating-summary-counts-in-pandas">Quickly Creating Summary Counts in Pandas<a class="anchor" aria-label="anchor" href="#quickly-creating-summary-counts-in-pandas"></a>
</h3>
<p>Let’s next count the number of samples for each species. We can do
this in a few ways, but we’ll use <code>groupby</code> combined with
<strong>a <code>count()</code> method</strong>.</p>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" tabindex="-1"></a><span class="co"># Count the number of samples by species</span></span>
<span id="cb96-2"><a href="#cb96-2" tabindex="-1"></a>species_counts <span class="op">=</span> samples.groupby(<span class="st">'species_id'</span>)[<span class="st">'record_id'</span>].count()</span>
<span id="cb96-3"><a href="#cb96-3" tabindex="-1"></a><span class="bu">print</span>(species_counts)</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="quick-easy-plotting-data-using-pandas">Quick &amp; Easy Plotting Data Using Pandas<a class="anchor" aria-label="anchor" href="#quick-easy-plotting-data-using-pandas"></a>
</h2>
<hr class="half-width">
<p>We can plot our summary stats using Pandas, too.</p>
<div class="codewrapper sourceCode" id="cb97">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a><span class="co"># Create a quick bar chart</span></span>
<span id="cb97-2"><a href="#cb97-2" tabindex="-1"></a>species_counts.plot(kind<span class="op">=</span><span class="st">'bar'</span>)</span></code></pre>
</div>
<figure><img src="../fig/countPerSpecies.png" alt="Weight by Species Site" class="figure mx-auto d-block"></figure><p>We can also look at how many animals were captured in each site:</p>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" tabindex="-1"></a>total_count <span class="op">=</span> samples.groupby(<span class="st">'plot_id'</span>)[<span class="st">'record_id'</span>].nunique()</span>
<span id="cb98-2"><a href="#cb98-2" tabindex="-1"></a><span class="co"># Let's plot that too</span></span>
<span id="cb98-3"><a href="#cb98-3" tabindex="-1"></a>total_count.plot(kind<span class="op">=</span><span class="st">'bar'</span>)</span></code></pre>
</div>
<div id="challenge---plots" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---plots" class="callout-inner">
<h3 class="callout-title">Challenge - Plots</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a plot of average weight across all species per site.</li>
<li>Create a plot of total males versus total females for the entire
dataset.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7"> Show me the solution </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><code>samples.groupby('plot_id')["weight"].mean().plot(kind='bar')</code></li>
</ol>
<figure><img src="../fig/01_chall_bar_meanweight.png" alt="average weight across all species for each plot" class="figure mx-auto d-block"></figure><ol start="2" style="list-style-type: decimal">
<li><code>samples.groupby('sex')["record_id"].count().plot(kind='bar')</code></li>
</ol>
<figure><img src="../fig/01_chall_bar_totalsex.png" alt="total males versus total females for the entire dataset" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>pandas DataFrames carry many methods that can help you explore the
properties and distribution of data.</li>
<li>Using the <code>help</code> function, reading error messages, and
asking for help are all good strategies when things go wrong.</li>
<li>The type of an object determines what kinds of operations you can
perform on and with it.</li>
<li>Python evaluates expressions in a line one by one before assigning
the final result to a variable.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-n004-index-slice-subset"><p>Content from <a href="n004-index-slice-subset.html">Indexing, Slicing and Subsetting DataFrames</a></p>
<hr>
<p>Last updated on 2025-10-29 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/n004-index-slice-subset.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I access specific data within my data set?</li>
<li>How can Python and Pandas help me to analyse my data?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe what 0-based indexing is.</li>
<li>Manipulate and extract data using column headings and index
locations.</li>
<li>Employ slicing to select sets of data from a DataFrame.</li>
<li>Employ label and integer-based indexing to select ranges of data in
a dataframe.</li>
<li>Reassign values within subsets of a DataFrame.</li>
<li>Create a copy of a DataFrame.</li>
<li>Query / select a subset of data using a set of criteria using the
following operators: <code>==</code>, <code>!=</code>,
<code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>,
<code>&lt;=</code>.</li>
<li>Locate subsets of data using masks.</li>
<li>Describe BOOLEAN objects in Python and manipulate data using
BOOLEANs.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Tip: use <code>.head()</code> method throughout this lesson to keep
your display neater for students. Encourage students to try with and
without <code>.head()</code> to reinforce this useful tool and then to
use it or not at their preference.</p>
<p>For example, if a student worries about keeping up in pace with
typing, let them know they can skip the <code>.head()</code>, but that
you’ll use it to keep more lines of previous steps visible.</p>
</div>
</div>
</div>
</div>
<p>In the first episode of this lesson, we read a CSV file into a
pandas’ DataFrame. We learned how to:</p>
<ul>
<li>save a DataFrame to a named object,</li>
<li>create plots based on the data we loaded into pandas</li>
</ul>
<p>In this lesson, we will explore ways to access different parts of the
data using:</p>
<ul>
<li>indexing,</li>
<li>slicing, and</li>
<li>subsetting</li>
</ul>
<section><h2 class="section-heading" id="loading-our-data">Loading our data<a class="anchor" aria-label="anchor" href="#loading-our-data"></a>
</h2>
<hr class="half-width">
<p>We will continue to use the samples dataset that we worked with in
the last episode. Let’s reopen and read in the data again:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Make sure pandas is loaded</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Read in the survey CSV</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>samples <span class="op">=</span> pd.read_csv(<span class="st">"../data/surveys_complete_77_89.csv"</span>)</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="indexing-and-slicing-in-python">Indexing and Slicing in Python<a class="anchor" aria-label="anchor" href="#indexing-and-slicing-in-python"></a>
</h2>
<hr class="half-width">
<p>We often want to work with subsets of a <strong>DataFrame</strong>
object. There are different ways to accomplish this including: using
labels (column headings), numeric ranges, or specific x,y index
locations.</p>
</section><section><h2 class="section-heading" id="selecting-data-using-labels-column-headings">Selecting data using Labels (Column Headings)<a class="anchor" aria-label="anchor" href="#selecting-data-using-labels-column-headings"></a>
</h2>
<hr class="half-width">
<p>We use square brackets <code>[]</code> to select a subset of a Python
object. For example, we can select all data from a column named
<code>species_id</code> from the <code>samples</code> DataFrame by name.
There are two ways to do this:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># TIP: use the .head() method we saw earlier to make output shorter</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># Method 1: select a 'subset' of the data using the column name</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>samples[<span class="st">'species_id'</span>]</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># Method 2: use the column name as an 'attribute'; gives the same output</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>samples.species_id</span></code></pre>
</div>
<p>We can pass a list of column names too, as an index to select columns
in that order. This is useful when we need to reorganize our data.</p>
<p><strong>NOTE:</strong> If a column name is not contained in the
DataFrame, an exception (error) will be raised.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Select the species and plot columns from the DataFrame</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>samples[[<span class="st">'species_id'</span>, <span class="st">'plot_id'</span>]]</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># What happens when you flip the order?</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>samples[[<span class="st">'plot_id'</span>, <span class="st">'species_id'</span>]]</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># What happens if you ask for a column that doesn't exist?</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>samples[<span class="st">'speciess'</span>]</span></code></pre>
</div>
<p>Python tells us what type of error it is in the traceback, at the
bottom it says <code>KeyError: 'speciess'</code> which means that
<code>speciess</code> is not a valid column name (nor a valid key in the
related Python data type dictionary).</p>
<div id="reminder" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="reminder" class="callout-inner">
<h3 class="callout-title">Reminder</h3>
<div class="callout-content">
<p>The Python language and its modules (such as Pandas) define reserved
words that should not be used as identifiers when assigning objects and
variable names. Examples of reserved words in Python include Boolean
values <code>True</code> and <code>False</code>, operators
<code>and</code>, <code>or</code>, and <code>not</code>, among others.
The full list of reserved words for Python version 3 is provided at <a href="https://docs.python.org/3/reference/lexical_analysis.html#identifiers" class="external-link">https://docs.python.org/3/reference/lexical_analysis.html#identifiers</a>.</p>
<p>When naming objects and variables, it’s also important to avoid using
the names of built-in data structures and methods. For example, a
<em>list</em> is a built-in data type. It is possible to use the word
‘list’ as an identifier for a new object, for example
<code>list = ['apples', 'oranges', 'bananas']</code>. However, you would
then be unable to create an empty list using <code>list()</code> or
convert a tuple to a list using <code>list(sometuple)</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="extracting-range-based-subsets-slicing">Extracting Range based Subsets: Slicing<a class="anchor" aria-label="anchor" href="#extracting-range-based-subsets-slicing"></a>
</h2>
<hr class="half-width">
<div id="reminder-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="reminder-1" class="callout-inner">
<h3 class="callout-title">Reminder</h3>
<div class="callout-content">
<p>Python uses 0-based indexing.</p>
</div>
</div>
</div>
<p>Let’s remind ourselves that Python uses 0-based indexing. This means
that the first element in an object is located at position
<code>0</code>. This is different from other tools like R and Matlab
that index elements within objects starting at 1.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Create a list of numbers:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span></code></pre>
</div>
<p><img src="../fig/slicing-indexing.png" alt="indexing diagram" class="figure"><img src="../fig/slicing-slicing.png" alt="slicing diagram" class="figure"></p>
<div id="challenge---extracting-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---extracting-data" class="callout-inner">
<h3 class="callout-title">Challenge - Extracting data</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>
<p>What value does the code below return?</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>a[<span class="dv">0</span>]</span></code></pre>
</div>
</li>
<li>
<p>How about this:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>a[<span class="dv">5</span>]</span></code></pre>
</div>
</li>
<li><p>In the example above, calling <code>a[5]</code> returns an error.
Why is that?</p></li>
<li>
<p>What about?</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>a[<span class="bu">len</span>(a)]</span></code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p><code>a[0]</code> returns <code>1</code>, as Python starts with
element 0 (this may be different from what you have previously
experience with other languages e.g. MATLAB and R)</p></li>
<li><p><code>a[5]</code> raises an <code>IndexError</code></p></li>
<li><p>The error is raised because the list <code>a</code> has no
element with index 5: it has only five entries, indexed from 0 to
4.</p></li>
<li>
<p><code>a[len(a)]</code> also raises an <code>IndexError</code>.
<code>len(a)</code> returns <code>5</code>, making
<code>a[len(a)]</code> equivalent to <code>a[5]</code>. To retreive the
final element of a list, us the index <code>-1</code>, e.g.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>a[<span class="op">-</span><span class="dv">1</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">5</span></span></code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="slicing-subsets-of-rows-in-python">Slicing Subsets of Rows in Python<a class="anchor" aria-label="anchor" href="#slicing-subsets-of-rows-in-python"></a>
</h2>
<hr class="half-width">
<p>Slicing using the <code>[]</code> operator selects a set of rows
and/or columns from a DataFrame. To slice out a set of rows, you use the
following syntax: <code>data[start:stop]</code>. When slicing in pandas
the start bound is included in the output. The stop bound is one step
BEYOND the row you want to select. So if you want to select rows 0, 1
and 2 your code would look like this:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Select rows 0, 1, 2 (row 3 is not selected)</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>samples[<span class="dv">0</span>:<span class="dv">3</span>]</span></code></pre>
</div>
<p>The stop bound in Python is different from what you might be used to
in languages like Matlab and R.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Select the first 5 rows (rows 0, 1, 2, 3, 4)</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>samples[:<span class="dv">5</span>]</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Select the last element in the list</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co"># (the slice starts at the last element, and ends at the end of the list)</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>samples[<span class="op">-</span><span class="dv">1</span>:]</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="slicing-subsets-of-rows-and-columns-in-python">Slicing Subsets of Rows and Columns in Python<a class="anchor" aria-label="anchor" href="#slicing-subsets-of-rows-and-columns-in-python"></a>
</h2>
<hr class="half-width">
<p>We just learned we can use square brackets to slice our DataFrame and
select columns or rows. And this is useful overall in Python for
selecting a subset of items from a data structure. However, the pandas
library recommends to use <code>.loc[]</code> and <code>.iloc[]</code>
instead. With bot of these we can select specific ranges of our data in
both the row and column directions, using either label or integer-based
indexing.</p>
<ul>
<li><p><code>loc</code> is primarily a <em>label</em> based indexing
where you can refer to rows and columns by their name. E.g., column
‘month’. Note that <em>integers</em> may be used, but they are
interpreted as a <em>label</em>.</p></li>
<li><p><code>iloc</code> is primarily an <em>integer</em> based indexing
counting from 0. That is, you specify rows and columns using a number.
Thus, the first row is row 0, the second column is column 1,
etc.</p></li>
</ul>
<p>To select a subset of rows <strong>and</strong> columns from our
DataFrame, we can use the <code>loc</code> method. For example, we can
select the first three rows, and the month, day and year columns, like
this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># loc[row slicing, column slicing]</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>samples.loc[<span class="dv">0</span>:<span class="dv">3</span>, [<span class="st">"month"</span>, <span class="st">"day"</span>, <span class="st">"year"</span>]]</span></code></pre>
</div>
<p>which gives the <strong>output</strong></p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   month  day  year
0      7   16  1977
1      7   16  1977
2      7   16  1977
3      7   16  1977</code></pre>
</div>
<p>Let’s explore some other ways to index and select subsets of
data:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Select all columns for rows of index values 0 and 10</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>samples.loc[[<span class="dv">0</span>, <span class="dv">10</span>], :]</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># What does this do?</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>samples.loc[<span class="dv">0</span>, [<span class="st">'species_id'</span>, <span class="st">'plot_id'</span>, <span class="st">'weight'</span>]]</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co"># What happens when you type the code below?</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>samples.loc[[<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">35549</span>], :]</span></code></pre>
</div>
<p><strong>NOTE</strong>: Labels must be found in the DataFrame or you
will get a <code>KeyError</code>.</p>
<p>We can also select a specific data value using a row and column
location within the DataFrame and <code>iloc</code> indexing:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Syntax for iloc indexing to finding a specific data element</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>dat.iloc[row, column]</span></code></pre>
</div>
<p>In this <code>iloc</code> example,</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>samples.iloc[<span class="dv">2</span>, <span class="dv">6</span>]</span></code></pre>
</div>
<p>gives the <strong>output</strong></p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'F'</span></span></code></pre>
</div>
<p>Remember that Python indexing begins at 0. So, the index location [2,
6] selects the element that is 3 rows down and 7 columns over in the
DataFrame.</p>
<div id="challenge---range" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---range" class="callout-inner">
<h3 class="callout-title">Challenge - Range</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>What happens when you execute:
<ul>
<li><code>samples[0:1]</code></li>
<li><code>samples[0]</code></li>
<li><code>samples[:4]</code></li>
<li><code>samples[:-1]</code></li>
</ul>
</li>
<li>What happens when you call:
<ul>
<li><code>samples.iloc[0:1]</code></li>
<li><code>samples.iloc[0]</code></li>
<li><code>samples.iloc[:4, :]</code></li>
<li><code>samples.iloc[0:4, 1:4]</code></li>
<li><code>samples.loc[0:4, 1:4]</code></li>
</ul>
</li>
<li>How are the last two commands different?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Selection Challenges </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<ul>
<li>
<code>samples[0:3]</code> returns the first three rows of the
DataFrame:</li>
</ul>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      record_id  month  day  year  plot_id species_id sex  hindfoot_length  weight
0          1      7   16  1977        2         NL   M             32.0     NaN
1          2      7   16  1977        3         NL   M             33.0     NaN
2          3      7   16  1977        2         DM   F             37.0     NaN</code></pre>
</div>
<ul>
<li>
<code>samples[0]</code> results in a ‘KeyError’, since direct
indexing of a row is redundant with <code>iloc</code>.</li>
<li>
<code>samples[0:1]</code> can be used to obtain only the first
row.</li>
<li>
<code>samples[:5]</code> slices from the first row to the
fifth:</li>
</ul>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  weight
0          1      7   16  1977        2         NL   M             32.0     NaN
1          2      7   16  1977        3         NL   M             33.0     NaN
2          3      7   16  1977        2         DM   F             37.0     NaN
3          4      7   16  1977        7         DM   M             36.0     NaN
4          5      7   16  1977        3         DM   M             35.0     NaN</code></pre>
</div>
<ul>
<li>
<code>samples[:-1]</code> provides everything except the final row
of the DataFrame. You can use negative index numbers to count backwards
from the last entry.</li>
</ul>
</li>
<li><ul>
<li>
<code>samples.iloc[0:1]</code> returns the first row</li>
<li>
<code>samples.iloc[0]</code> returns the first row as a named
list</li>
<li>
<code>samples.iloc[:4, :]</code> returns all columns of the first
four rows</li>
<li>
<code>samples.iloc[0:4, 1:4]</code> selects specified columns of the
first four rows</li>
<li>
<code>samples.loc[0:4, 1:4]</code> results in a ‘TypeError’ - see
below.</li>
</ul></li>
<li>While <code>iloc</code> uses integers as indices and slices
accordingly, <code>loc</code> works with labels. It is like accessing
values from a dictionary, asking for the key names. Column names 1:4 do
not exist, so the call to <code>loc</code> above results in an error.
Check also the difference between <code>samples.loc[0:4]</code> and
<code>samples.iloc[0:4]</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="subsetting-data-using-criteria">Subsetting Data using Criteria<a class="anchor" aria-label="anchor" href="#subsetting-data-using-criteria"></a>
</h2>
<hr class="half-width">
<p>We can also select a subset of our data using criteria. For example,
we can select all rows that have a year value of 2002:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>samples.loc[samples.year <span class="op">==</span> <span class="dv">1985</span>, :]</span></code></pre>
</div>
<p>Which produces the following output:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>       record_id  month  day  year  plot_id species_id  sex  hindfoot_length  <span class="op">\</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="dv">9789</span>        <span class="dv">9790</span>      <span class="dv">1</span>   <span class="dv">19</span>  <span class="dv">1985</span>       <span class="dv">16</span>         RM    F             <span class="fl">16.0</span>   </span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="dv">9790</span>        <span class="dv">9791</span>      <span class="dv">1</span>   <span class="dv">19</span>  <span class="dv">1985</span>       <span class="dv">17</span>         OT    F             <span class="fl">20.0</span>   </span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="dv">9791</span>        <span class="dv">9792</span>      <span class="dv">1</span>   <span class="dv">19</span>  <span class="dv">1985</span>        <span class="dv">6</span>         DO    M             <span class="fl">35.0</span>   </span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="dv">9792</span>        <span class="dv">9793</span>      <span class="dv">1</span>   <span class="dv">19</span>  <span class="dv">1985</span>       <span class="dv">12</span>         DO    F             <span class="fl">35.0</span>   </span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="dv">9793</span>        <span class="dv">9794</span>      <span class="dv">1</span>   <span class="dv">19</span>  <span class="dv">1985</span>       <span class="dv">24</span>         RM    M             <span class="fl">16.0</span>   </span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>...          ...    ...  ...   ...      ...        ...  ...              ...   </span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="dv">11222</span>      <span class="dv">11223</span>     <span class="dv">12</span>    <span class="dv">8</span>  <span class="dv">1985</span>        <span class="dv">4</span>         DM    M             <span class="fl">36.0</span>   </span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="dv">11223</span>      <span class="dv">11224</span>     <span class="dv">12</span>    <span class="dv">8</span>  <span class="dv">1985</span>       <span class="dv">11</span>         DM    M             <span class="fl">37.0</span>   </span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="dv">11224</span>      <span class="dv">11225</span>     <span class="dv">12</span>    <span class="dv">8</span>  <span class="dv">1985</span>        <span class="dv">7</span>         PE    M             <span class="fl">20.0</span>   </span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="dv">11225</span>      <span class="dv">11226</span>     <span class="dv">12</span>    <span class="dv">8</span>  <span class="dv">1985</span>        <span class="dv">1</span>         DM    M             <span class="fl">38.0</span>   </span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="dv">11226</span>      <span class="dv">11227</span>     <span class="dv">12</span>    <span class="dv">8</span>  <span class="dv">1985</span>       <span class="dv">15</span>        NaN  NaN              NaN   </span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>       weight            genus    species    taxa                  plot_type  </span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="dv">9789</span>      <span class="fl">4.0</span>  Reithrodontomys  megalotis  Rodent           Rodent Exclosure  </span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="dv">9790</span>     <span class="fl">16.0</span>        Onychomys   torridus  Rodent                    Control  </span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="dv">9791</span>     <span class="fl">48.0</span>        Dipodomys      ordii  Rodent  Short<span class="op">-</span>term Krat Exclosure  </span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="dv">9792</span>     <span class="fl">40.0</span>        Dipodomys      ordii  Rodent                    Control  </span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a><span class="dv">9793</span>      <span class="fl">4.0</span>  Reithrodontomys  megalotis  Rodent           Rodent Exclosure  </span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>...       ...              ...        ...     ...                        ...  </span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a><span class="dv">11222</span>    <span class="fl">40.0</span>        Dipodomys   merriami  Rodent                    Control  </span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="dv">11223</span>    <span class="fl">49.0</span>        Dipodomys   merriami  Rodent                    Control  </span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a><span class="dv">11224</span>    <span class="fl">18.0</span>       Peromyscus   eremicus  Rodent           Rodent Exclosure  </span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a><span class="dv">11225</span>    <span class="fl">47.0</span>        Dipodomys   merriami  Rodent          Spectab exclosure  </span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a><span class="dv">11226</span>     NaN              NaN        NaN     NaN   Long<span class="op">-</span>term Krat Exclosure  </span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a></span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>[<span class="dv">1438</span> rows x <span class="dv">13</span> columns]</span></code></pre>
</div>
<p>Or we can select all rows that do not contain the year 2002:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>samples.loc[samples.year <span class="op">!=</span> <span class="dv">1985</span>, :]</span></code></pre>
</div>
<p>We can define sets of criteria too:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>samples.loc[(samples.year <span class="op">&gt;=</span> <span class="dv">1980</span>) <span class="op">&amp;</span> (samples.year <span class="op">&lt;=</span> <span class="dv">1985</span>), :]</span></code></pre>
</div>
<div class="section level3">
<h3 id="python-syntax-cheat-sheet">Python Syntax Cheat Sheet<a class="anchor" aria-label="anchor" href="#python-syntax-cheat-sheet"></a>
</h3>
<p>We can use the syntax below when querying data by criteria from a
DataFrame. Experiment with selecting various subsets of the “samples”
data.</p>
<ul>
<li>Equals: <code>==</code>
</li>
<li>Not equals: <code>!=</code>
</li>
<li>Greater than: <code>&gt;</code>
</li>
<li>Less than: <code>&lt;</code>
</li>
<li>Greater than or equal to: <code>&gt;=</code>
</li>
<li>Less than or equal to: <code>&lt;=</code>
</li>
</ul>
<div id="challenge---queries" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---queries" class="callout-inner">
<h3 class="callout-title">Challenge - Queries</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Select a subset of rows in the <code>samples</code> DataFrame
that contain data from the year 1999 and that contain weight values less
than or equal to 8. How many rows did you end up with? What did your
neighbor get?</p></li>
<li>
<p>You can use the <code>isin</code> command in Python to query a
DataFrame based upon a list of values as follows:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>samples.loc[samples[<span class="st">'species_id'</span>].isin([listGoesHere]), :]</span></code></pre>
</div>
<p>Use the <code>isin</code> function to find all plots that contain the
particular species <code>NL</code> and <code>DM</code> in the “samples”
DataFrame. How many records contain these values?</p>
</li>
<li><p>Experiment with other queries. Create a query that finds all rows
with a weight value greater than or equal to 0.</p></li>
<li><p>The <code>~</code> symbol in Python can be used to return the
OPPOSITE of the selection that you specify. It is equivalent to
<strong>is not in</strong>. Write a query that selects all rows with sex
NOT equal to ‘M’ or ‘F’ in the “samples” data.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>samples.loc[(samples[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">1989</span>) <span class="op">&amp;</span> (samples[<span class="st">"weight"</span>] <span class="op">&lt;=</span> <span class="dv">8</span>), :]</span></code></pre>
</div>
<p>If you are only interested in how many rows meet the criteria, the
sum of <code>True</code> values could be used instead:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="bu">sum</span>((samples[<span class="st">"year"</span>] <span class="op">==</span> <span class="dv">1999</span>) <span class="op">&amp;</span> (samples[<span class="st">"weight"</span>] <span class="op">&lt;=</span> <span class="dv">8</span>))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">63</span></span></code></pre>
</div>
</li>
<li>
<p>For example, using <code>NL</code> and <code>DM</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>samples.loc[samples[<span class="st">'species_id'</span>].isin([<span class="st">'NL'</span>, <span class="st">'DM'</span>]), <span class="st">'plot_id'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([ 2,  3,  7,  1,  8,  6,  4, 14, 15, 13,  9, 11, 10, 17, 20, 23, 21,
    18, 22, 19, 12,  5, 16, 24])</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>samples.loc[samples[<span class="st">'species_id'</span>].isin([<span class="st">'PB'</span>, <span class="st">'PL'</span>]), [<span class="st">'plot_id'</span>]].unique().shape</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(24,)</code></pre>
</div>
</li>
<li><p><code>samples.loc[samples["weight"] &gt;= 0, :]</code></p></li>
<li><div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>samples.loc[<span class="op">~</span>samples[<span class="st">"sex"</span>].isin([<span class="st">'M'</span>, <span class="st">'F'</span>]), :]</span></code></pre>
</div></li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>When working through the solutions to the challenges above, you could
introduce already that all these slice operations are actually based on
a <em>Boolean indexing</em> operation (next section in the lesson). The
filter provides for each record if it satisfies (True) or not (False).
The slicing itself interprets the True/False of each record.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="using-masks-to-identify-a-specific-condition">Using masks to identify a specific condition<a class="anchor" aria-label="anchor" href="#using-masks-to-identify-a-specific-condition"></a>
</h2>
<hr class="half-width">
<p>A <strong>mask</strong> can be useful to locate where a particular
subset of values exist or don’t exist - for example, NaN, or “Not a
Number” values. To understand masks, we also need to understand
<code>BOOLEAN</code> objects in Python.</p>
<p>Boolean values include <code>True</code> or <code>False</code>. For
example,</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># Set x to 5</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="co"># What does the code below return?</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>x <span class="op">&gt;</span> <span class="dv">5</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co"># How about this?</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>x <span class="op">==</span> <span class="dv">5</span></span></code></pre>
</div>
<p>When we ask Python whether <code>x</code> is greater than 5, it
returns <code>False</code>. This is Python’s way to say “No”. Indeed,
the value of <code>x</code> is 5, and 5 is not greater than 5.</p>
<p>To create a boolean mask:</p>
<ul>
<li>Set the True / False criteria
(e.g. <code>values &gt; 5 = True</code>)</li>
<li>Python will then assess each value in the object to determine
whether the value meets the criteria (True) or not (False).</li>
<li>Python creates an output object that is the same shape as the
original object, but with a <code>True</code> or <code>False</code>
value for each index location.</li>
</ul>
<p>Let’s try this out. Let’s identify all locations in the survey data
that have null (missing or NaN) data values. We can use the
<code>isna</code> method to do this. The <code>isna</code> method will
compare each cell with a null value. If an element has a null value, it
will be assigned a value of <code>True</code> in the output object.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>samples.isna()</span></code></pre>
</div>
<p>A snippet of the output is below:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>       record_id  month    day   year  plot_id  species_id    sex  <span class="op">\</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="dv">0</span>          <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="dv">1</span>          <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="dv">2</span>          <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="dv">3</span>          <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="dv">4</span>          <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>...          ...    ...    ...    ...      ...         ...    ...   </span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="dv">16873</span>      <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="dv">16874</span>      <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="dv">16875</span>      <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="dv">16876</span>      <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a><span class="dv">16877</span>      <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>       <span class="va">False</span>  <span class="va">False</span>   </span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a>       hindfoot_length  weight  genus  species   taxa  plot_type  </span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a><span class="dv">0</span>                <span class="va">False</span>    <span class="va">True</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a><span class="dv">1</span>                <span class="va">False</span>    <span class="va">True</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-17"><a href="#cb35-17" tabindex="-1"></a><span class="dv">2</span>                <span class="va">False</span>    <span class="va">True</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-18"><a href="#cb35-18" tabindex="-1"></a><span class="dv">3</span>                <span class="va">False</span>    <span class="va">True</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-19"><a href="#cb35-19" tabindex="-1"></a><span class="dv">4</span>                <span class="va">False</span>    <span class="va">True</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-20"><a href="#cb35-20" tabindex="-1"></a>...                ...     ...    ...      ...    ...        ...  </span>
<span id="cb35-21"><a href="#cb35-21" tabindex="-1"></a><span class="dv">16873</span>            <span class="va">False</span>   <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-22"><a href="#cb35-22" tabindex="-1"></a><span class="dv">16874</span>            <span class="va">False</span>   <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-23"><a href="#cb35-23" tabindex="-1"></a><span class="dv">16875</span>            <span class="va">False</span>   <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-24"><a href="#cb35-24" tabindex="-1"></a><span class="dv">16876</span>            <span class="va">False</span>   <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-25"><a href="#cb35-25" tabindex="-1"></a><span class="dv">16877</span>            <span class="va">False</span>   <span class="va">False</span>  <span class="va">False</span>    <span class="va">False</span>  <span class="va">False</span>      <span class="va">False</span>  </span>
<span id="cb35-26"><a href="#cb35-26" tabindex="-1"></a></span>
<span id="cb35-27"><a href="#cb35-27" tabindex="-1"></a>[<span class="dv">16878</span> rows x <span class="dv">13</span> columns]</span></code></pre>
</div>
<p>To select the rows where there are null values, we can use the mask
as an index to subset our data as follows:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co"># To select just the rows with NaN values, we can use the 'any()' method</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>samples.loc[samples.isna().<span class="bu">any</span>(axis<span class="op">=</span><span class="dv">1</span>), :]</span></code></pre>
</div>
<p>We can run <code>isna</code> on a particular column too. What does
the code below do?</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co"># What does this do?</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>empty_weights <span class="op">=</span> samples.loc[samples[<span class="st">"weight"</span>].isna(), <span class="st">"weight"</span>]</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="bu">print</span>(empty_weights)</span></code></pre>
</div>
<p>Let’s take a minute to look at the statement above. We are using the
Boolean object <code>samples["weight"].isna()</code> as an index to
<code>samples</code>. We are asking Python to select rows that have a
<code>NaN</code> value of weight.</p>
<div id="challenge---putting-it-all-together" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---putting-it-all-together" class="callout-inner">
<h3 class="callout-title">Challenge - Putting it all together</h3>
<div class="callout-content">
<p>Create a new DataFrame that only contains observations with sex
values that are <strong>not</strong> female or male. Print the number of
rows in this new DataFrame. Verify the result by comparing the number of
rows in the new DataFrame with the number of rows in the samples
DataFrame where sex is null.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>new <span class="op">=</span> samples.loc[<span class="op">~</span>samples[<span class="st">'sex'</span>].isin([<span class="st">'M'</span>, <span class="st">'F'</span>]), :].copy()</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="bu">len</span>(new)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1300</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="bu">sum</span>(samples[<span class="st">'sex'</span>].isna())</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">1300</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>In Python, portions of data can be accessed using indices, slices,
column headings, and condition-based subsetting.</li>
<li>Python uses 0-based indexing, in which the first element in a list,
tuple or any other data structure has an index of 0.</li>
<li>Pandas enables common data exploration steps such as data indexing,
slicing and conditional subsetting.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-n005-merging-data"><p>Content from <a href="n005-merging-data.html">Combining DataFrames</a></p>
<hr>
<p>Last updated on 2025-10-29 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/n005-merging-data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Can I work with data from multiple sources?</li>
<li>How can I combine data from different data sets?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Combine data from multiple files into a single DataFrame using merge
and concat.</li>
<li>Combine two DataFrames using a unique ID found in both
DataFrames.</li>
<li>Employ <code>to_csv</code> to export a DataFrame in CSV format.</li>
<li>Join DataFrames using common fields (join keys).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In many “real world” situations, the data that we want to use come in
multiple files. We often need to combine these files into a single
DataFrame to analyze the data. The pandas package provides <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html" class="external-link">various
methods for combining DataFrames</a> including <code>merge</code> and
<code>concat</code>.</p>
<p>To work through the examples below, we first need to load the species
and surveys files into pandas DataFrames.:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>samples <span class="op">=</span> pd.read_csv(<span class="st">"../data/surveys.csv"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>samples</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>       record_id  month  day  year  plot species  sex  hindfoot_length weight
0              1      7   16  1977     2      NA    M               32  NaN
1              2      7   16  1977     3      NA    M               33  NaN
2              3      7   16  1977     2      DM    F               37  NaN
3              4      7   16  1977     7      DM    M               36  NaN
4              5      7   16  1977     3      DM    M               35  NaN
...          ...    ...  ...   ...   ...     ...  ...              ...  ...
35544      35545     12   31  2002    15      AH  NaN              NaN  NaN
35545      35546     12   31  2002    15      AH  NaN              NaN  NaN
35546      35547     12   31  2002    10      RM    F               15   14
35547      35548     12   31  2002     7      DO    M               36   51
35548      35549     12   31  2002     5     NaN  NaN              NaN  NaN

[35549 rows x 9 columns]</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>species <span class="op">=</span> pd.read_csv(<span class="st">"../data/species.csv"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>species</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  species_id             genus          species     taxa
0          AB        Amphispiza        bilineata     Bird
1          AH  Ammospermophilus          harrisi   Rodent
2          AS        Ammodramus       savannarum     Bird
3          BA           Baiomys          taylori   Rodent
4          CB   Campylorhynchus  brunneicapillus     Bird
..        ...               ...              ...      ...
49         UP            Pipilo              sp.     Bird
50         UR            Rodent              sp.   Rodent
51         US           Sparrow              sp.     Bird
52         ZL       Zonotrichia       leucophrys     Bird
53         ZM           Zenaida         macroura     Bird

[54 rows x 4 columns]</code></pre>
</div>
<section><h2 class="section-heading" id="concatenating-dataframes">Concatenating DataFrames<a class="anchor" aria-label="anchor" href="#concatenating-dataframes"></a>
</h2>
<hr class="half-width">
<p>We can use the <code>concat</code> function in pandas to append
either columns or rows from one DataFrame to another. Let’s grab two
subsets of our data to see how this works.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Read in first 10 lines of surveys table</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>survey_sub <span class="op">=</span> surveys_df.head(<span class="dv">10</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># Grab the last 10 rows</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>survey_sub_last10 <span class="op">=</span> surveys_df.tail(<span class="dv">10</span>)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co"># Reset the index values to the second dataframe appends properly</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>survey_sub_last10 <span class="op">=</span> survey_sub_last10.reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co"># drop=True option avoids adding new index column with old index values</span></span></code></pre>
</div>
<p>When we concatenate DataFrames, we need to specify the axis.
<code>axis=0</code> tells pandas to stack the second DataFrame UNDER the
first one. It will automatically detect whether the column names are the
same and will stack accordingly. <code>axis=1</code> will stack the
columns in the second DataFrame to the RIGHT of the first DataFrame. To
stack the data vertically, we need to make sure we have the same columns
and associated column format in both datasets. When we stack
horizontally, we want to make sure what we are doing makes sense
(i.e. the data are related in some way).</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Stack the DataFrames on top of each other</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>vertical_stack <span class="op">=</span> pd.concat([survey_sub, survey_sub_last10], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># Place the DataFrames side by side</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>horizontal_stack <span class="op">=</span> pd.concat([survey_sub, survey_sub_last10], axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre>
</div>
<div class="section level4">
<h4 id="row-index-values-and-concat">Row Index Values and Concat<a class="anchor" aria-label="anchor" href="#row-index-values-and-concat"></a>
</h4>
<p>Have a look at the <code>vertical_stack</code> DataFrame. Notice
anything unusual? The row indexes for the two DataFrames
<code>survey_sub</code> and <code>survey_sub_last10</code> have been
repeated. We can reindex the new DataFrame using the
<code>reset_index()</code> method.</p>
</div>
<div class="section level3">
<h3 id="writing-out-data-to-csv">Writing Out Data to CSV<a class="anchor" aria-label="anchor" href="#writing-out-data-to-csv"></a>
</h3>
<p>We can use the <code>to_csv</code> command to export a DataFrame in
CSV format. Note that the code below will by default save the data into
the current working directory. We can save it to a different folder by
adding the foldername and a slash to the file
<code>vertical_stack.to_csv('foldername/out.csv')</code>. We use the
<code>index=False</code> so that pandas doesn’t include the index number
for each line.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Write DataFrame to CSV</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>vertical_stack.to_csv(<span class="st">'../data/out.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<div id="challenge---combine-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---combine-data" class="callout-inner">
<h3 class="callout-title">Challenge - Combine Data</h3>
<div class="callout-content">
<p>In the data folder, there is another folder called
<code>yearly_files</code> that contains survey data broken down into
individual files by year. Read the data from two of these files,
<code>surveys2001.csv</code> and <code>surveys2002.csv</code>, into
pandas and combine the files to make one new DataFrame. Export your
results as a CSV and make sure it reads back into pandas properly.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># read the files:</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>survey2001 <span class="op">=</span> pd.read_csv(<span class="st">"../data/surveys2001.csv"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>survey2002 <span class="op">=</span> pd.read_csv(<span class="st">"../data/surveys2002.csv"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># concatenate</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>survey_all <span class="op">=</span> pd.concat([survey2001, survey2002], axis<span class="op">=</span><span class="dv">0</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_weight_year.png" alt="average weight for each year, grouped by sex" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># writing to file:</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>weight_year.to_csv(<span class="st">"weight_for_year.csv"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co"># reading it back in:</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>pd.read_csv(<span class="st">"weight_for_year.csv"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="joining-dataframes">Joining DataFrames<a class="anchor" aria-label="anchor" href="#joining-dataframes"></a>
</h2>
<hr class="half-width">
<p>When we concatenated our DataFrames, we simply added them to each
other - stacking them either vertically or side by side. Another way to
combine DataFrames is to use columns in each dataset that contain common
values (a common unique identifier). Combining DataFrames using a common
field is called “joining”. The columns containing the common values are
called “join key(s)”. Joining DataFrames in this way is often useful
when one DataFrame is a “lookup table” containing additional data that
we want to include in the other.</p>
<p>NOTE: This process of joining tables is similar to what we do with
tables in an SQL database.</p>
<p>For example, the <code>species.csv</code> file that we’ve been
working with is a lookup table. This table contains the genus, species
and taxa code for 55 species. The species code is unique for each line.
These species are identified in our survey data as well using the unique
species code. Rather than adding three more columns for the genus,
species and taxa to each of the 35,549 line <code>survey</code>
DataFrame, we can maintain the shorter table with the species
information. When we want to access that information, we can create a
query that joins the additional columns of information to the
<code>survey</code> DataFrame.</p>
<p>Storing data in this way has many benefits.</p>
<ol style="list-style-type: decimal">
<li>It ensures consistency in the spelling of species attributes (genus,
species and taxa) given each species is only entered once. Imagine the
possibilities for spelling errors when entering the genus and species
thousands of times!</li>
<li>It also makes it easy for us to make changes to the species
information once without having to find each instance of it in the
larger survey data.</li>
<li>It optimizes the size of our data.</li>
</ol>
<div class="section level3">
<h3 id="joining-two-dataframes">Joining Two DataFrames<a class="anchor" aria-label="anchor" href="#joining-two-dataframes"></a>
</h3>
<p>To better understand joins, let’s grab the first 10 lines of our data
as a subset to work with. We’ll use the <code>.head()</code> method to
do this. We’ll also read in a subset of the species table.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Read in first 10 lines of surveys table</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>survey_sub <span class="op">=</span> surveys_df.head(<span class="dv">10</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># Import a small subset of the species data designed for this part of the lesson.</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># It is stored in the data folder.</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>species_sub <span class="op">=</span> pd.read_csv(<span class="st">'../data/speciesSubset.csv'</span>)</span></code></pre>
</div>
<p>In this example, <code>species_sub</code> is the lookup table
containing genus, species, and taxa names that we want to join with the
data in <code>survey_sub</code> to produce a new DataFrame that contains
all of the columns from both <code>species_df</code> <em>and</em>
<code>survey_df</code>.</p>
</div>
<div class="section level3">
<h3 id="identifying-join-keys">Identifying join keys<a class="anchor" aria-label="anchor" href="#identifying-join-keys"></a>
</h3>
<p>To identify appropriate join keys we first need to know which
field(s) are shared between the files (DataFrames). We might inspect
both DataFrames to identify these columns. If we are lucky, both
DataFrames will have columns with the same name that also contain the
same data. If we are less lucky, we need to identify a
(differently-named) column in each DataFrame that contains the same
information.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>species_sub.columns</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Index(['species_id', 'genus', 'species', 'taxa'], dtype='object')</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>survey_sub.columns</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Index(['record_id', 'month', 'day', 'year', 'plot_id', 'species_id',
       'sex', 'hindfoot_length', 'weight'], dtype='object')</code></pre>
</div>
<p>In our example, the join key is the column containing the two-letter
species identifier, which is called <code>species_id</code>.</p>
<p>Now that we know the fields with the common species ID attributes in
each DataFrame, we are almost ready to join our data. However, since
there are <a href="https://blog.codinghorror.com/a-visual-explanation-of-sql-joins/" class="external-link">different
types of joins</a>, we also need to decide which type of join makes
sense for our analysis.</p>
</div>
<div class="section level3">
<h3 id="inner-joins">Inner joins<a class="anchor" aria-label="anchor" href="#inner-joins"></a>
</h3>
<p>The most common type of join is called an <strong>inner
join</strong>. An inner join combines two DataFrames based on a join key
and returns a new DataFrame that contains <em>only</em> those rows that
have matching values in <em>both</em> of the original DataFrames. An
example of an inner join, adapted from <a href="https://blog.codinghorror.com/a-visual-explanation-of-sql-joins/" class="external-link">Jeff
Atwood’s blogpost about SQL joins</a> is below:</p>
<figure><img src="../fig/inner-join.png" alt="Inner join -- courtesy of codinghorror.com" class="figure mx-auto d-block"></figure><p>The pandas function for performing joins is called <code>merge</code>
and an Inner join is the default option:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>merged_inner <span class="op">=</span> pd.merge(left<span class="op">=</span>survey_sub, right<span class="op">=</span>species_sub, left_on<span class="op">=</span><span class="st">'species_id'</span>, right_on<span class="op">=</span><span class="st">'species_id'</span>)</span></code></pre>
</div>
<p>In this case, <code>species_id</code> is the only column name in both
DataFrames, so if we skipped the <code>left_on</code> and
<code>right_on</code> arguments, <code>pandas</code> would guess that we
wanted to use that column to join. However, it is usually better to be
explicit.</p>
<p>So what is the size of the output data?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>merged_inner.shape</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(8, 12)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>merged_inner</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  \
0          1      7   16  1977        2         NL   M               32
1          2      7   16  1977        3         NL   M               33
2          3      7   16  1977        2         DM   F               37
3          4      7   16  1977        7         DM   M               36
4          5      7   16  1977        3         DM   M               35
5          8      7   16  1977        1         DM   M               37
6          9      7   16  1977        1         DM   F               34
7          7      7   16  1977        2         PE   F              NaN

   weight       genus   species    taxa
0     NaN     Neotoma  albigula  Rodent
1     NaN     Neotoma  albigula  Rodent
2     NaN   Dipodomys  merriami  Rodent
3     NaN   Dipodomys  merriami  Rodent
4     NaN   Dipodomys  merriami  Rodent
5     NaN   Dipodomys  merriami  Rodent
6     NaN   Dipodomys  merriami  Rodent
7     NaN  Peromyscus  eremicus  Rodent</code></pre>
</div>
<p>The result of an inner join of <code>survey_sub</code> and
<code>species_sub</code> is a new DataFrame that contains the combined
set of columns from <code>survey_sub</code> and
<code>species_sub</code>. It <em>only</em> contains rows that have
two-letter species codes that are the same in both the
<code>survey_sub</code> and <code>species_sub</code> DataFrames. In
other words, if a row in <code>survey_sub</code> has a value of
<code>species_id</code> that does <em>not</em> appear in the
<code>species_id</code> column of <code>species</code>, it will not be
included in the DataFrame returned by an inner join. Similarly, if a row
in <code>species_sub</code> has a value of <code>species_id</code> that
does <em>not</em> appear in the <code>species_id</code> column of
<code>survey_sub</code>, that row will not be included in the DataFrame
returned by an inner join.</p>
<p>The two DataFrames that we want to join are passed to the
<code>merge</code> function using the <code>left</code> and
<code>right</code> argument. The <code>left_on='species_id'</code>
argument tells <code>merge</code> to use the <code>species_id</code>
column as the join key from <code>survey_sub</code> (the
<code>left</code> DataFrame). Similarly , the
<code>right_on='species_id'</code> argument tells <code>merge</code> to
use the <code>species_id</code> column as the join key from
<code>species_sub</code> (the <code>right</code> DataFrame). For inner
joins, the order of the <code>left</code> and <code>right</code>
arguments does not matter.</p>
<p>The result <code>merged_inner</code> DataFrame contains all of the
columns from <code>survey_sub</code> (<code>record_id</code>,
<code>month</code>, <code>day</code>, etc.) as well as all the columns
from <code>species_sub</code> (<code>species_id</code>,
<code>genus</code>, <code>species</code>, and <code>taxa</code>).</p>
<p>Notice that <code>merged_inner</code> has fewer rows than
<code>survey_sub</code>. This is an indication that there were rows in
<code>surveys_df</code> with value(s) for <code>species_id</code> that
do not exist as value(s) for <code>species_id</code> in
<code>species_df</code>.</p>
</div>
<div class="section level3">
<h3 id="left-joins">Left joins<a class="anchor" aria-label="anchor" href="#left-joins"></a>
</h3>
<p>What if we want to add information from <code>species_sub</code> to
<code>survey_sub</code> without losing any of the information from
<code>survey_sub</code>? In this case, we use a different type of join
called a “left outer join”, or a “left join”.</p>
<p>Like an inner join, a left join uses join keys to combine two
DataFrames. Unlike an inner join, a left join will return <em>all</em>
of the rows from the <code>left</code> DataFrame, even those rows whose
join key(s) do not have values in the <code>right</code> DataFrame. Rows
in the <code>left</code> DataFrame that are missing values for the join
key(s) in the <code>right</code> DataFrame will simply have null (i.e.,
NaN or None) values for those columns in the resulting joined
DataFrame.</p>
<p>Note: a left join will still discard rows from the <code>right</code>
DataFrame that do not have values for the join key(s) in the
<code>left</code> DataFrame.</p>
<figure><img src="../fig/left-join.png" alt="Left Join" class="figure mx-auto d-block"></figure><p>A left join is performed in pandas by calling the same
<code>merge</code> function used for inner join, but using the
<code>how='left'</code> argument:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>merged_left <span class="op">=</span> pd.merge(left<span class="op">=</span>survey_sub, right<span class="op">=</span>species_sub, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'species_id'</span>, right_on<span class="op">=</span><span class="st">'species_id'</span>)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>merged_left</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  \
0          1      7   16  1977        2         NL   M               32
1          2      7   16  1977        3         NL   M               33
2          3      7   16  1977        2         DM   F               37
3          4      7   16  1977        7         DM   M               36
4          5      7   16  1977        3         DM   M               35
5          6      7   16  1977        1         PF   M               14
6          7      7   16  1977        2         PE   F              NaN
7          8      7   16  1977        1         DM   M               37
8          9      7   16  1977        1         DM   F               34
9         10      7   16  1977        6         PF   F               20

   weight       genus   species    taxa
0     NaN     Neotoma  albigula  Rodent
1     NaN     Neotoma  albigula  Rodent
2     NaN   Dipodomys  merriami  Rodent
3     NaN   Dipodomys  merriami  Rodent
4     NaN   Dipodomys  merriami  Rodent
5     NaN         NaN       NaN     NaN
6     NaN  Peromyscus  eremicus  Rodent
7     NaN   Dipodomys  merriami  Rodent
8     NaN   Dipodomys  merriami  Rodent
9     NaN         NaN       NaN     NaN</code></pre>
</div>
<p>The result DataFrame from a left join (<code>merged_left</code>)
looks very much like the result DataFrame from an inner join
(<code>merged_inner</code>) in terms of the columns it contains.
However, unlike <code>merged_inner</code>, <code>merged_left</code>
contains the <em>same number of rows</em> as the original
<code>survey_sub</code> DataFrame. When we inspect
<code>merged_left</code>, we find there are rows where the information
that should have come from <code>species_sub</code> (i.e.,
<code>species_id</code>, <code>genus</code>, and <code>taxa</code>) is
missing (they contain <code>NaN</code> values):</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>merged_left[merged_left[<span class="st">'genus'</span>].isna()]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   record_id  month  day  year  plot_id species_id sex  hindfoot_length  \
5          6      7   16  1977        1         PF   M               14
9         10      7   16  1977        6         PF   F               20

   weight genus species taxa
5     NaN   NaN     NaN  NaN
9     NaN   NaN     NaN  NaN</code></pre>
</div>
<p>These rows are the ones where the value of <code>species_id</code>
from <code>survey_sub</code> (in this case, <code>PF</code>) does not
occur in <code>species_sub</code>.</p>
</div>
<div class="section level3">
<h3 id="other-join-types">Other join types<a class="anchor" aria-label="anchor" href="#other-join-types"></a>
</h3>
<p>The pandas <code>merge</code> function supports other join types:</p>
<ul>
<li>Right (outer) join: Invoked by passing <code>how='right'</code> as
an argument. Similar to a left join, except <em>all</em> rows from the
<code>right</code> DataFrame are kept, while rows from the
<code>left</code> DataFrame without matching join key(s) values are
discarded.</li>
<li>Full (outer) join: Invoked by passing <code>how='outer'</code> as an
argument. This join type returns the all pairwise combinations of rows
from both DataFrames; i.e., the <em>Cartesian product</em> and the
result DataFrame will use <code>NaN</code> where data is missing in one
of the dataframes. This join type is very rarely used, but can be
helpful to see all the qualities of both tables, including each common
and duplicate column.</li>
<li>Self-join: Joins a data frame with itself. Self-joins can be useful
when you want to, for instance, compare records within the same dataset
based on a given criteria. A fuller discussion of how and when it might
be useful to do so can be found in <a href="https://blog.devgenius.io/self-join-and-cross-join-in-pandas-dataframe-b30bfbc0e52a" class="external-link">Self-Join
and Cross Join in Pandas DataFrame</a>
</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="final-challenges">Final Challenges<a class="anchor" aria-label="anchor" href="#final-challenges"></a>
</h2>
<hr class="half-width">
<div id="challenge---distributions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---distributions" class="callout-inner">
<h3 class="callout-title">Challenge - Distributions</h3>
<div class="callout-content">
<p>Create a new DataFrame by joining the contents of the
<code>surveys.csv</code> and <code>species.csv</code> tables. Then
calculate and plot the distribution of:</p>
<ol style="list-style-type: decimal">
<li>Number of unique taxa by plot</li>
<li>Number of unique taxa by sex by plot</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>merged_left <span class="op">=</span> pd.merge(left<span class="op">=</span>surveys_df,right<span class="op">=</span>species_df, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span><span class="st">"species_id"</span>)</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>taxa per plot (number of species of each taxa per plot):</li>
</ol>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>merged_left.groupby([<span class="st">"plot_id"</span>])[<span class="st">"taxa"</span>].nunique().plot(kind<span class="op">=</span><span class="st">'bar'</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_ntaxa_per_site.png" alt="taxa per plot" class="figure mx-auto d-block"></figure><p><em>Suggestion</em>: It is also possible to plot the number of
individuals for each taxa in each plot (stacked bar chart):</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>merged_left.groupby([<span class="st">"plot_id"</span>, <span class="st">"taxa"</span>]).count()[<span class="st">"record_id"</span>].unstack().plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">3</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="fl">1.05</span>)) <span class="co"># stop the legend from overlapping with the bar plot</span></span></code></pre>
</div>
<figure><img src="../fig/04_chall_taxa_per_site.png" alt="taxa per plot" class="figure mx-auto d-block"></figure><ol start="2" style="list-style-type: decimal">
<li>taxa by sex by plot: Providing the Nan values with the M|F values
(can also already be changed to ‘x’):</li>
</ol>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>merged_left.loc[merged_left[<span class="st">"sex"</span>].isna(), <span class="st">"sex"</span>] <span class="op">=</span> <span class="st">'M|F'</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>ntaxa_sex_site<span class="op">=</span> merged_left.groupby([<span class="st">"plot_id"</span>, <span class="st">"sex"</span>])[<span class="st">"taxa"</span>].nunique().reset_index(level<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>ntaxa_sex_site <span class="op">=</span> ntaxa_sex_site.pivot_table(values<span class="op">=</span><span class="st">"taxa"</span>, columns<span class="op">=</span><span class="st">"sex"</span>, index<span class="op">=</span>ntaxa_sex_site.index)</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>ntaxa_sex_site.plot(kind<span class="op">=</span><span class="st">"bar"</span>, legend<span class="op">=</span><span class="va">False</span>, stacked<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">3</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="fl">1.08</span>),</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>           fontsize<span class="op">=</span><span class="st">'small'</span>, frameon<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_ntaxa_per_site_sex.png" alt="taxa per plot per sex" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Suggestion (for discussion only) </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>The number of individuals for each taxa in each plot per sex can be
derived as well.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>sex_taxa_site  <span class="op">=</span> merged_left.groupby([<span class="st">"plot_id"</span>, <span class="st">"taxa"</span>, <span class="st">"sex"</span>]).count()[<span class="st">'record_id'</span>]</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>sex_taxa_site.unstack(level<span class="op">=</span>[<span class="dv">1</span>, <span class="dv">2</span>]).plot(kind<span class="op">=</span><span class="st">'bar'</span>, logy<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">3</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="fl">1.15</span>),</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>           fontsize<span class="op">=</span><span class="st">'small'</span>, frameon<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_sex_taxa_site_intro.png" alt="taxa per plot per sex" class="figure mx-auto d-block"></figure><p>This is not really the best plot choice, e.g. it is not easily
readable. A first option to make this better, is to make facets.
However, pandas/matplotlib do not provide this by default. Just as a
pure matplotlib example (<code>M|F</code> if for not-defined sex
records):</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="cf">for</span> sex, ax <span class="kw">in</span> <span class="bu">zip</span>([<span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M|F"</span>], axs):</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    sex_taxa_site[sex_taxa_site[<span class="st">"sex"</span>] <span class="op">==</span> sex].plot(kind<span class="op">=</span><span class="st">'bar'</span>, ax<span class="op">=</span>ax, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    ax.set_ylabel(sex)</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> ax.is_last_row():</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>        ax.set_xticks([])</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>        ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>axs[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="st">'upper center'</span>, ncol<span class="op">=</span><span class="dv">5</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.5</span>, <span class="fl">1.3</span>),</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>              fontsize<span class="op">=</span><span class="st">'small'</span>, frameon<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_sex_taxa_site.png" alt="taxa per plot per sex" class="figure mx-auto d-block"></figure><p>However, it would be better to link to <a href="https://stanford.edu/~mwaskom/software/seaborn" class="external-link">Seaborn</a> and <a href="https://github.com/ellisonbg/altair" class="external-link">Altair</a> for this kind of
multivariate visualisation.</p>
</div>
</div>
</div>
</div>
<div id="challenge---diversity-index" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---diversity-index" class="callout-inner">
<h3 class="callout-title">Challenge - Diversity Index</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>In the data folder, there is a <code>plots.csv</code> file that
contains information about the type associated with each plot. Use that
data to summarize the number of plots by plot type.</p></li>
<li><p>Calculate a diversity index of your choice for control vs rodent
exclosure plots. The index should consider both species abundance and
number of species. You might choose to use the simple <a href="https://www.amnh.org/explore/curriculum-collections/biodiversity-counts/plant-ecology/how-to-calculate-a-biodiversity-index" class="external-link">biodiversity
index described here</a> which calculates diversity as: the number of
species in the plot / the total number of individuals in the plot =
Biodiversity index.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>plot_info <span class="op">=</span> pd.read_csv(<span class="st">"../data/plots.csv"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>plot_info.groupby(<span class="st">"plot_type"</span>).count()</span></code></pre>
</div></li>
<li>
</li>
</ol>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>merged_site_type <span class="op">=</span> pd.merge(merged_left, plot_info, on<span class="op">=</span><span class="st">'plot_id'</span>)</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="co"># For each plot, get the number of species for each plot</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>nspecies_site <span class="op">=</span> merged_site_type.groupby([<span class="st">"plot_id"</span>])[<span class="st">"species"</span>].nunique().rename(<span class="st">"nspecies"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co"># For each plot, get the number of individuals</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>nindividuals_site <span class="op">=</span> merged_site_type.groupby([<span class="st">"plot_id"</span>]).count()[<span class="st">'record_id'</span>].rename(<span class="st">"nindiv"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co"># combine the two series</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a>diversity_index <span class="op">=</span> pd.concat([nspecies_site, nindividuals_site], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co"># calculate the diversity index</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a>diversity_index[<span class="st">'diversity'</span>] <span class="op">=</span> diversity_index[<span class="st">'nspecies'</span>]<span class="op">/</span>diversity_index[<span class="st">'nindiv'</span>]</span></code></pre>
</div>
<p>Making a bar chart from this diversity index:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>diversity_index[<span class="st">'diversity'</span>].plot(kind<span class="op">=</span><span class="st">"barh"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>plt.xlabel(<span class="st">"Diversity index"</span>)</span></code></pre>
</div>
<figure><img src="../fig/04_chall_diversity_index.png" alt="horizontal bar chart of diversity index by plot" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Pandas’ <code>merge</code> and <code>concat</code> can be used to
combine subsets of a DataFrame, or even data from different files.</li>
<li>
<code>join</code> function combines DataFrames based on index or
column.</li>
<li>Joining two DataFrames can be done in multiple ways (left, right,
and inner) depending on what data must be in the final DataFrame.</li>
<li>
<code>to_csv</code> can be used to write out DataFrames in CSV
format.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-06-loops-and-functions"><p>Content from <a href="06-loops-and-functions.html">Data Workflows and Automation</a></p>
<hr>
<p>Last updated on 2025-10-27 |

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/episodes/06-loops-and-functions.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Can I automate operations in Python?</li>
<li>What are functions and why should I use them?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe why for loops are used in Python.</li>
<li>Employ for loops to automate data analysis.</li>
<li>Write unique filenames in Python.</li>
<li>Build reusable code in Python.</li>
<li>Write functions using conditional statements (if, then, else).</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far, we’ve used Python and the pandas library to explore and
manipulate individual datasets by hand, much like we would do in a
spreadsheet. The beauty of using a programming language like Python,
though, comes from the ability to automate data processing through the
use of loops and functions.</p>
<section><h2 class="section-heading" id="for-loops">For loops<a class="anchor" aria-label="anchor" href="#for-loops"></a>
</h2>
<hr class="half-width">
<p>Loops allow us to repeat a workflow (or series of actions) a given
number of times or while some condition is true. We would use a loop to
automatically process data that’s stored in multiple files (daily values
with one file per year, for example). Loops lighten our work load by
performing repeated tasks without our direct involvement and make it
less likely that we’ll introduce errors by making mistakes while
processing each file by hand.</p>
<p>Let’s write a simple for loop that simulates what a kid might see
during a visit to the zoo:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">print</span>(animals)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['lion', 'tiger', 'crocodile', 'vulture', 'hippo']</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    <span class="bu">print</span>(creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lion</span></span>
<span><span class="va">tiger</span></span>
<span><span class="va">crocodile</span></span>
<span><span class="va">vulture</span></span>
<span><span class="va">hippo</span></span></code></pre>
</div>
<p>The line defining the loop must start with <code>for</code> and end
with a colon, and the body of the loop must be indented.</p>
<p>In this example, <code>creature</code> is the loop variable that
takes the value of the next entry in <code>animals</code> every time the
loop goes around. We can call the loop variable anything we like. After
the loop finishes, the loop variable will still exist and will have the
value of the last entry in the collection:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'The loop variable is now: '</span> <span class="op">+</span> creature)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The loop variable is now: hippo</code></pre>
</div>
<p>We are not asking Python to print the value of the loop variable
anymore, but the for loop still runs and the value of
<code>creature</code> changes on each pass through the loop. The
statement <code>pass</code> in the body of the loop means “do
nothing”.</p>
<div id="challenge---loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---loops" class="callout-inner">
<h3 class="callout-title">Challenge - Loops</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>What happens if we don’t include the <code>pass</code>
statement?</p></li>
<li><p>Rewrite the loop so that the animals are separated by commas, not
new lines (Hint: You can concatenate strings using a plus sign. For
example, <code>print(string1 + string2)</code> outputs
‘string1string2’).</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>animals <span class="op">=</span> [<span class="st">'lion'</span>, <span class="st">'tiger'</span>, <span class="st">'crocodile'</span>, <span class="st">'vulture'</span>, <span class="st">'hippo'</span>]</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>IndentationError: expected an indented block</code></pre>
</div>
</li>
<li>
<p>Using the <code>end</code> argument to <code>print</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="cf">for</span> creature <span class="kw">in</span> animals:</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>    <span class="bu">print</span>(creature <span class="op">+</span> <span class="st">','</span>, end<span class="op">=</span><span class="st">''</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>lion,tiger,crocodile,vulture,hippo,</code></pre>
</div>
<p>This puts a comma on the end of the list, which is not ideal. To
avoid this, we need to use an altogether different approach: string
objects in Python have a <code>join</code> method, which can be used to
concatenate items in a list with the string in between, e.g.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">', '</span>.join(animals)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'lion, tiger, crocodile, vulture, hippo'</span></span></code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="automating-data-processing-using-for-loops">Automating data processing using For Loops<a class="anchor" aria-label="anchor" href="#automating-data-processing-using-for-loops"></a>
</h2>
<hr class="half-width">
<p>The file we’ve been using so far, <code>surveys.csv</code>, contains
25 years of data and is very large. We would like to separate the data
for each year into a separate file.</p>
<p>Let’s start by making a new directory inside the folder
<code>data</code> to store all of these files using the module
<code>os</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>os.mkdir(<span class="st">'data/yearly_files'</span>)</span></code></pre>
</div>
<p>The command <code>os.mkdir</code> is equivalent to <code>mkdir</code>
in the shell. Just so we are sure, we can check that the new directory
was created within the <code>data</code> folder:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>os.listdir(<span class="st">'data'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['plots.csv',
 'portal_mammals.sqlite',
 'species.csv',
 'survey2001.csv',
 'survey2002.csv',
 'surveys.csv',
 'surveys2002_temp.csv',
 'yearly_files']</code></pre>
</div>
<p>The command <code>os.listdir</code> is equivalent to <code>ls</code>
in the shell.</p>
<p>In previous lessons, we saw how to use the library pandas to load the
species data into memory as a DataFrame, how to select a subset of the
data using some criteria, and how to write the DataFrame into a CSV
file. Let’s write a script that performs those three steps in sequence
for the year 2002:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co"># Select only data for the year 2002</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>surveys2002 <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> <span class="dv">2002</span>]</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co"># Write the new DataFrame to a CSV file</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>surveys2002.to_csv(<span class="st">'data/yearly_files/surveys2002.csv'</span>)</span></code></pre>
</div>
<p>To create yearly data files, we could repeat the last two commands
over and over, once for each year of data. Repeating code is neither
elegant nor practical, and is very likely to introduce errors into your
code. We want to turn what we’ve just written into a loop that repeats
the last two commands for every year in the dataset.</p>
<p>Let’s start by writing a loop that prints the names of the files we
want to create - the dataset we are using covers 1977 through 2002, and
we’ll create a separate file for each of those years. Listing the
filenames is a good way to confirm that the loop is behaving as we
expect.</p>
<p>We have seen that we can loop over a list of items, so we need a list
of years to loop over. We can get the years in our DataFrame with:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>]</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>0        1977
1        1977
2        1977
3        1977
         ...
35545    2002
35546    2002
35547    2002
35548    2002</code></pre>
</div>
<p>but we want only unique years, which we can get using the
<code>unique</code> method which we have already seen.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>surveys_df[<span class="st">'year'</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array([1977, 1978, 1979, 1980, 1981, 1982, 1983, 1984, 1985, 1986, 1987,
       1988, 1989, 1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
       1999, 2000, 2001, 2002], dtype=int64)</code></pre>
</div>
<p>Putting this into our for loop we get</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>   filename<span class="op">=</span><span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>   <span class="bu">print</span>(filename)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1977.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1978.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1979.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1980.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1981.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1982.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1983.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1984.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1985.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1986.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1987.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1988.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1989.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1990.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1991.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1992.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1993.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1994.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1995.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1996.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1997.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1998.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys1999.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2000.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2001.csv</span></span>
<span><span class="va">data</span><span class="op">/</span><span class="va">yearly_files</span><span class="op">/</span><span class="va">surveys2002.csv</span></span></code></pre>
</div>
<p>We can now add the rest of the steps we need to create separate text
files:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> surveys_df[<span class="st">'year'</span>].unique():</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year]</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a CSV file</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>Look inside the <code>yearly_files</code> directory and check a
couple of the files you just created to confirm that everything worked
as expected.</p>
</section><section><h2 class="section-heading" id="writing-unique-file-names">Writing Unique File Names<a class="anchor" aria-label="anchor" href="#writing-unique-file-names"></a>
</h2>
<hr class="half-width">
<p>Notice that the code above created a unique filename for each
year.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>filename <span class="op">=</span> <span class="st">'data/yearly_files/surveys'</span> <span class="op">+</span> <span class="bu">str</span>(year) <span class="op">+</span> <span class="st">'.csv'</span></span></code></pre>
</div>
<p>Let’s break down the parts of this name:</p>
<ul>
<li>The first part is some text that specifies the directory to store
our data file in (data/yearly_files/) and the first part of the file
name (surveys): <code>'data/yearly_files/surveys'</code>
</li>
<li>We can concatenate this with the value of a variable, in this case
<code>year</code> by using the plus <code>+</code> sign and the variable
we want to add to the file name: <code>+ str(year)</code>
</li>
<li>Then we add the file extension as another text string:
<code>+ '.csv'</code>
</li>
</ul>
<p>Notice that we use single quotes to add text strings. The variable is
not surrounded by quotes. This code produces the string
<code>data/yearly_files/surveys2002.csv</code> which contains the path
to the new filename AND the file name itself.</p>
<div id="challenge---modifying-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---modifying-loops" class="callout-inner">
<h3 class="callout-title">Challenge - Modifying loops</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Some of the surveys you saved are missing data (they have null
values that show up as NaN - Not A Number - in the DataFrames and do not
show up in the text files). Modify the for loop so that the entries with
null values are not included in the yearly files.</p></li>
<li><p>Let’s say you only want to look at data from a given multiple of
years. How would you modify your loop in order to generate a data file
for only every 5th year, starting from 1977?</p></li>
<li><p>Instead of splitting out the data by years, a colleague wants to
do analyses each species separately. How would you write a unique CSV
file for each species?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a>surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year].dropna()</span></code></pre>
</div></li>
<li>
<p>You could just make a list manually, however, why not check the
first and last year making use of the code itself?</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>n_year <span class="op">=</span> <span class="dv">5</span>  <span class="co"># better overview by making variable from it</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>first_year <span class="op">=</span> surveys_df[<span class="st">'year'</span>].<span class="bu">min</span>()</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>last_year <span class="op">=</span> surveys_df[<span class="st">'year'</span>].<span class="bu">max</span>()</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(first_year, last_year, n_year):</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    <span class="bu">print</span>(year)</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>    surveys_year <span class="op">=</span> surveys_df[surveys_df.year <span class="op">==</span> year].dropna()</span></code></pre>
</div>
</li>
<li><div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="cf">for</span> species <span class="kw">in</span> surveys_df[<span class="st">'species_id'</span>].dropna().unique():</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    surveys_species <span class="op">=</span> surveys_df[surveys_df.species_id <span class="op">==</span> species]</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'episodes/data/species_files/surveys'</span> <span class="op">+</span> species <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    surveys_species.to_csv(filename)</span></code></pre>
</div></li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="building-reusable-and-modular-code-with-functions">Building reusable and modular code with functions<a class="anchor" aria-label="anchor" href="#building-reusable-and-modular-code-with-functions"></a>
</h2>
<hr class="half-width">
<p>Suppose that separating large data files into individual yearly files
is a task that we frequently have to perform. We could write a
<strong>for loop</strong> like the one above every time we needed to do
it but that would be time consuming and error prone. A more elegant
solution would be to create a reusable tool that performs this task with
minimum input from the user. To do this, we are going to turn the code
we’ve already written into a function.</p>
<p>Functions are reusable, self-contained pieces of code that are called
with a single command. They can be designed to accept arguments as input
and return values, but they don’t need to do either. Variables declared
inside functions only exist while the function is running and if a
variable within the function (a local variable) has the same name as a
variable somewhere else in the code, the local variable hides but
doesn’t overwrite the other.</p>
<p>Every method used in Python (for example, <code>print</code>) is a
function, and the libraries we import (say, <code>pandas</code>) are a
collection of functions. We will only use functions that are housed
within the same code that uses them, but we can also write functions
that can be used by different programs.</p>
<p>Functions are declared following this general structure:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>    <span class="co"># The body of the function is indented</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>    <span class="co"># This function prints the two arguments to screen</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>    </span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>    <span class="co"># And returns their product</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span></code></pre>
</div>
<p>The function declaration starts with the word <code>def</code>,
followed by the function name and any arguments in parenthesis, and ends
in a colon. The body of the function is indented just like loops are. If
the function returns something when it is called, it includes a return
statement at the end.</p>
<p>This is how we call the function:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 2 5 (this is done inside the function!)</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Their product is:'</span>, product_of_inputs, <span class="st">'(this is done outside the function!)'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Their product is: 10 (this is done outside the function!)</code></pre>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>When teaching the challenge below, demonstrating the results in a
debugging environment can make function scope more clear.</p>
</div>
</div>
</div>
</div>
<div id="challenge---functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---functions" class="callout-inner">
<h3 class="callout-title">Challenge - Functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Change the values of the arguments provided to the function and
check its output</li>
<li>Try calling the function by giving it the wrong number of arguments
(not 2) or not assigning the function call to a variable (no
<code>product_of_inputs =</code>)</li>
<li>Declare a variable inside the function and test to see where it
exists (Hint: can you print it from outside the function?)</li>
<li>Explore what happens when a variable both inside and outside the
function have the same name. What happens to the global variable when
you change the value of the local variable?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<p>For example, using an integer and a string:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">3</span>, <span class="st">'clap'</span>)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="bu">print</span>(product_of_inputs)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 3 clap (this is done inside the function!)
clapclapclap</code></pre>
</div>
</li>
<li>
<p>For example, providing a third integer argument:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>product_of_inputs <span class="op">=</span> this_is_the_function_name(<span class="dv">3</span>, <span class="dv">18</span>, <span class="dv">33</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>TypeError: this_is_the_function_name() takes 2 positional arguments but 3 were given</code></pre>
</div>
<p>and proving the correct number of arguments but not capturing the
return value in a variable:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>this_is_the_function_name(<span class="dv">23</span>, <span class="dv">108</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 23 108 (this is done inside the function!)
2484</code></pre>
</div>
</li>
<li>
<p>An example looking at variables defined outside and inside the
function. Note that the explanatory comments have been removed from the
function definition.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>var_defined_outside <span class="op">=</span> <span class="st">'outside'</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>    var_defined_inside <span class="op">=</span> <span class="st">'inside'</span></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'This variable was created '</span> <span class="op">+</span> var_defined_outside <span class="op">+</span> <span class="st">' the function'</span>)</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>this_is_the_function_name(<span class="fl">3.3</span>, <span class="fl">7.9</span>)</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'This variable was created'</span> <span class="op">+</span> var_defined_inside <span class="op">+</span> <span class="st">' the function'</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The function arguments are: 3.3 7.9 (this is done inside the function!)
This variable was created outside the function
26.07</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>NameError: name 'var_defined_inside' is not defined</code></pre>
</div>
<p>We can see from these results that variables defined outside the
function are available for use inside them, while variables defined
inside a function are not available outside them.</p>
</li>
<li>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a>shared_variable_name <span class="op">=</span> <span class="st">'who would I be'</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> <span class="st">'without you'</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a></span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>this_is_the_function_name(<span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># does calling the function change the variable's value?</span></span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>who would I be
The function arguments are: 2 3 (this is done inside the function!)
6
who would I be</code></pre>
</div>
<p>And what about if we modify the variable inside the function?</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="kw">def</span> this_is_the_function_name(input_argument1, input_argument2):</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> <span class="st">'without you'</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>    shared_variable_name <span class="op">=</span> shared_variable_name <span class="op">+</span> <span class="st">', without them?'</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>    <span class="bu">print</span>(shared_variable_name)</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'The function arguments are:'</span>, input_argument1, input_argument2, <span class="st">'(this is done inside the function!)'</span>)</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>    <span class="cf">return</span> input_argument1 <span class="op">*</span> input_argument2</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a>this_is_the_function_name(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a><span class="bu">print</span>(shared_variable_name)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>without you, without them?
The function arguments are: 2 3 (this is done inside the function!)
6
who would I be</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>We can now turn our code for saving yearly data files into a
function. There are many different “chunks” of this code that we can
turn into functions, and we can even create functions that call other
functions inside them. Let’s first write a function that separates data
for just one year and saves that data to a file:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data):</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a><span class="co">    this_year -- year for which data is extracted</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/function_surveys'</span> <span class="op">+</span> <span class="bu">str</span>(this_year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb48-14"><a href="#cb48-14" tabindex="-1"></a>    surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>The text between the two sets of triple double quotes is called a
docstring and contains the documentation for the function. It does
nothing when the function is running and is therefore not necessary, but
it is good practice to include docstrings as a reminder of what the code
does. Docstrings in functions also become part of their ‘official’
documentation, and we can see them by typing
<code>help(function_name)</code>:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="bu">help</span>(one_year_csv_writer)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Help on function one_year_csv_writer in module __main__:

one_year_csv_writer(this_year, all_data)
    Writes a csv file for data from a given year.
    this_year -- year for which data is extracted
    all_data -- DataFrame with multi-year data</code></pre>
</div>
<p>Or, when working in the Jupyter environment, adding a <code>?</code>
(question mark) after the function name:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a>one_year_csv_writer?</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>one_year_csv_writer(<span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>We changed the root of the name of the CSV file so we can distinguish
it from the one we wrote before. Check the <code>yearly_files</code>
directory for the file. Did it do what you expect?</p>
<p>What we really want to do, though, is create files for multiple years
without having to request them one by one. Let’s write another function
that replaces the entire <code>for</code> loop by looping through a
sequence of years and repeatedly calling the function we just wrote,
<code>one_year_csv_writer</code>:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(start_year, end_year, all_data):</span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb53-7"><a href="#cb53-7" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb53-8"><a href="#cb53-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb53-9"><a href="#cb53-9" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb53-11"><a href="#cb53-11" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb53-12"><a href="#cb53-12" tabindex="-1"></a>        one_year_csv_writer(year, all_data)</span></code></pre>
</div>
<p>Because people will naturally expect that the end year for the files
is the last year with data, the for loop inside the function ends at
<code>end_year + 1</code>. By writing the entire loop into a function,
we’ve made a reusable tool for whenever we need to break a large data
file into yearly files. Because we can specify the first and last year
for which we want files, we can even use this function to create files
for a subset of the years available. This is how we call this
function:</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># Load the data into a DataFrame</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>surveys_df <span class="op">=</span> pd.read_csv(<span class="st">'data/surveys.csv'</span>)</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="co"># Create CSV files</span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>yearly_data_csv_writer(<span class="dv">1977</span>, <span class="dv">2002</span>, surveys_df)</span></code></pre>
</div>
<p>BEWARE! If you are using Jupyter Notebooks and you modify a function,
you MUST re-run that cell in order for the changed function to be
available to the rest of the code. Nothing will visibly happen when you
do this, though, because defining a function without <em>calling</em> it
doesn’t produce an output. Any cells that use the now-changed functions
will also have to be re-run for their output to change.</p>
<div id="challenge-more-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge-more-functions" class="callout-inner">
<h3 class="callout-title">Challenge: More functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Add two arguments to the functions we wrote that take the path of
the directory where the files will be written and the root of the file
name. Create a new set of files with a different name in a different
directory.</li>
<li>How could you use the function <code>yearly_data_csv_writer</code>
to create a CSV file for only one year? (Hint: think about the syntax
for <code>range</code>)</li>
<li>Make the functions return a list of the files they have written.
There are many ways you can do this (and you should try them all!):
either of the functions can print to screen, either can use a return
statement to give back numbers or strings to their function call, or you
can use some combination of the two. You could also try using the
<code>os</code> library to list the contents of directories.</li>
<li>Explore what happens when variables are declared inside each of the
functions versus in the main (non-indented) body of your code. What is
the scope of the variables (where are they visible)? What happens when
they have the same name but are given different values?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><div class="codewrapper sourceCode" id="cb55">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save, root_name):</span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a>    filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a></span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a>start_year <span class="op">=</span> <span class="dv">1978</span></span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a>end_year <span class="op">=</span> <span class="dv">2000</span></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a>directory_name <span class="op">=</span> <span class="st">'different_directory'</span></span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a>root_file_name <span class="op">=</span> <span class="st">'different_file_name'</span></span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb55-29"><a href="#cb55-29" tabindex="-1"></a>     one_year_csv_writer(year, surveys_df, directory_name, root_file_name)</span></code></pre>
</div></li>
<li><p><code>yearly_data_csv_writer(2000, 2000, surveys_df)</code></p></li>
<li>
<p>Building a list and returning it:</p>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data):</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a><span class="co">    this_year -- year for which data is extracted</span></span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a>    filename <span class="op">=</span> <span class="st">'data/yearly_files/function_surveys'</span> <span class="op">+</span> <span class="bu">str</span>(this_year) <span class="op">+</span> <span class="st">'.csv'</span></span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a>    <span class="cf">return</span> filename</span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a></span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(start_year, end_year, all_data):</span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a></span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a>    output_files <span class="op">=</span> []</span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a>        output_files.append(one_year_csv_writer(year, all_data))</span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a>    <span class="cf">return</span> output_files</span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a></span>
<span id="cb56-32"><a href="#cb56-32" tabindex="-1"></a><span class="bu">print</span>(yearly_data_csv_writer(<span class="dv">2000</span>, <span class="dv">2001</span>, surveys_df))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['data/yearly_files/function_surveys2000.csv', 'data/yearly_files/function_surveys2001.csv']</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>The functions we wrote demand that we give them a value for every
argument. Ideally, we would like these functions to be as flexible and
independent as possible. Let’s modify the function
<code>yearly_data_csv_writer</code> so that the <code>start_year</code>
and <code>end_year</code> default to the full range of the data if they
are not supplied by the user. Arguments can be given default values with
an equal sign in the function declaration. Any arguments in the function
without default values (here, <code>all_data</code>) is a required
argument and MUST come before the argument with default values (which
are optional in the function call).</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year<span class="op">=</span><span class="dv">1977</span>, end_year<span class="op">=</span><span class="dv">2002</span>):</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want (default 1977)</span></span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want (default 2002)</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a></span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>The “\t” in the <code>print</code> statements are tabs, used to make
the text align and be easier to read.</p>
<p>But what if our dataset doesn’t start in 1977 and end in 2002? We can
modify the function so that it looks for the start and end years in the
dataset if those dates are not provided:</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year<span class="op">=</span><span class="va">None</span>, end_year<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want, Check all_data! (default None)</span></span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want; Check all_data! (default None)</span></span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a></span>
<span id="cb60-18"><a href="#cb60-18" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb60-19"><a href="#cb60-19" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both optional arguments:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb60-20"><a href="#cb60-20" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb60-22"><a href="#cb60-22" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Both optional arguments:	1988 1993
Default values:		1977 2002</code></pre>
</div>
<p>The default values of the <code>start_year</code> and
<code>end_year</code> arguments in the function
<code>yearly_data_arg_test</code> are now <code>None</code>. This is a
built-in constant in Python that indicates the absence of a value -
essentially, that the variable exists in the namespace of the function
(the directory of variable names) but that it doesn’t correspond to any
existing object.</p>
<div id="challenge---variables" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---variables" class="callout-inner">
<h3 class="callout-title">Challenge - Variables</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>What type of object corresponds to a variable declared as
<code>None</code>? (Hint: create a variable set to <code>None</code> and
use the function <code>type()</code>)</li>
<li>Compare the behavior of the function
<code>yearly_data_arg_test</code> when the arguments have
<code>None</code> as a default and when they do not have default
values.</li>
<li>What happens if you only include a value for <code>start_year</code>
in the function call? Can you write the function call with only a value
for <code>end_year</code>? (Hint: think about how the function must be
assigning values to each of the arguments - this is related to the need
to put the arguments without default values before those with default
values in the function definition!)</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a>nothing <span class="op">=</span> <span class="va">None</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a><span class="bu">type</span>(nothing)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NoneType</span></span></code></pre>
</div>
</li>
<li>
<p>Removing <code>None</code> as the default value for the
<code>start_year</code> and <code>end_year</code> parameters results in
a <code>TypeError</code> because the function now expects three
arguments to be provided:</p>
<div class="codewrapper sourceCode" id="cb64">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_arg_test(all_data, start_year, end_year):</span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="co">    Modified from yearly_data_csv_writer to test default argument values!</span></span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want, Check all_data! (default None)</span></span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want; Check all_data! (default None)</span></span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a></span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb64-14"><a href="#cb64-14" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" tabindex="-1"></a>    <span class="cf">return</span> start_year, end_year</span>
<span id="cb64-16"><a href="#cb64-16" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>TypeError: yearly_data_arg_test() missing 2 required positional arguments: 'start_year' and 'end_year'</code></pre>
</div>
</li>
<li>
<p>Returning to the original definition of the function (i.e. with
the default <code>None</code> values):</p>
<div class="codewrapper sourceCode" id="cb66">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>yearly_data_arg_test(surveys_df, <span class="dv">1985</span>) <span class="co"># providing only the start year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(1985, 2002)</code></pre>
</div>
<p>If we want to provide only the end year, we have to name the
arguments:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1985</span>) <span class="co"># providing only the start year</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>(1977, 1985)</code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="if-statements">If Statements<a class="anchor" aria-label="anchor" href="#if-statements"></a>
</h2>
<hr class="half-width">
<p>The body of the test function now has two conditionals (if
statements) that check the values of <code>start_year</code> and
<code>end_year</code>. If statements execute a segment of code when some
condition is met. They commonly look something like this:</p>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a><span class="cf">if</span> a<span class="op">&lt;</span><span class="dv">0</span>:  <span class="co"># Meets first condition?</span></span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a>    <span class="co"># if a IS less than zero</span></span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a negative number'</span>)</span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a></span>
<span id="cb70-8"><a href="#cb70-8" tabindex="-1"></a><span class="cf">elif</span> a<span class="op">&gt;</span><span class="dv">0</span>:  <span class="co"># Did not meet first condition. meets second condition?</span></span>
<span id="cb70-9"><a href="#cb70-9" tabindex="-1"></a></span>
<span id="cb70-10"><a href="#cb70-10" tabindex="-1"></a>    <span class="co"># if a ISN'T less than zero and IS more than zero</span></span>
<span id="cb70-11"><a href="#cb70-11" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a is a positive number'</span>)</span>
<span id="cb70-12"><a href="#cb70-12" tabindex="-1"></a></span>
<span id="cb70-13"><a href="#cb70-13" tabindex="-1"></a><span class="cf">else</span>:  <span class="co"># Met neither condition</span></span>
<span id="cb70-14"><a href="#cb70-14" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" tabindex="-1"></a>    <span class="co"># if a ISN'T less than zero and ISN'T more than zero</span></span>
<span id="cb70-16"><a href="#cb70-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'a must be zero!'</span>)</span></code></pre>
</div>
<p>Which would return:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>a is a positive number</code></pre>
</div>
<p>Change the value of <code>a</code> to see how this function works.
The statement <code>elif</code> means “else if”, and all of the
conditional statements must end in a colon.</p>
<p>The if statements in the function <code>yearly_data_arg_test</code>
check whether there is an object associated with the variable names
<code>start_year</code> and <code>end_year</code>. If those variables
are <code>None</code>, the if statements return the boolean
<code>True</code> and execute whatever is in their body. On the other
hand, if the variable names are associated with some value (they got a
number in the function call), the if statements return
<code>False</code> and do not execute. The opposite conditional
statements, which would return <code>True</code> if the variables were
associated with objects (if they had received value in the function
call), would be <code>if start_year</code> and
<code>if end_year</code>.</p>
<p>As we’ve written it so far, the function
<code>yearly_data_arg_test</code> associates values in the function call
with arguments in the function definition just based on their order. If
the function gets only two values in the function call, the first one
will be associated with <code>all_data</code> and the second with
<code>start_year</code>, regardless of what we intended them to be. We
can get around this problem by calling the function using keyword
arguments, where each of the arguments in the function definition is
associated with a keyword and the function call passes values to the
function using these keywords:</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df)</span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Default values:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, <span class="dv">1988</span>, <span class="dv">1993</span>)</span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'No keywords:</span><span class="ch">\t\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-6"><a href="#cb72-6" tabindex="-1"></a></span>
<span id="cb72-7"><a href="#cb72-7" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, start_year<span class="op">=</span><span class="dv">1988</span>, end_year<span class="op">=</span><span class="dv">1993</span>)</span>
<span id="cb72-8"><a href="#cb72-8" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, in order:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-9"><a href="#cb72-9" tabindex="-1"></a></span>
<span id="cb72-10"><a href="#cb72-10" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1993</span>, start_year<span class="op">=</span><span class="dv">1988</span>)</span>
<span id="cb72-11"><a href="#cb72-11" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Both keywords, flipped:</span><span class="ch">\t\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-12"><a href="#cb72-12" tabindex="-1"></a></span>
<span id="cb72-13"><a href="#cb72-13" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, start_year<span class="op">=</span><span class="dv">1988</span>)</span>
<span id="cb72-14"><a href="#cb72-14" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default end:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span>
<span id="cb72-15"><a href="#cb72-15" tabindex="-1"></a></span>
<span id="cb72-16"><a href="#cb72-16" tabindex="-1"></a>start, end <span class="op">=</span> yearly_data_arg_test(surveys_df, end_year<span class="op">=</span><span class="dv">1993</span>)</span>
<span id="cb72-17"><a href="#cb72-17" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'One keyword, default start:</span><span class="ch">\t</span><span class="st">'</span>, start, end)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Default values:		1977 2002
No keywords:		1988 1993
Both keywords, in order:	1988 1993
Both keywords, flipped:	1988 1993
One keyword, default end:	1988 2002
One keyword, default start:	1977 1993</code></pre>
</div>
<div id="challenge---modifying-functions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="challenge---modifying-functions" class="callout-inner">
<h3 class="callout-title">Challenge - Modifying functions</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Rewrite the <code>one_year_csv_writer</code> and
<code>yearly_data_csv_writer</code> functions to have keyword arguments
with default values</p></li>
<li><p>Modify the functions so that they don’t create yearly files if
there is no data for a given year and display an alert to the user
(Hint: use conditional statements to do this. For an extra challenge,
use <code>try</code> statements!)</p></li>
<li>
<p>The code below checks to see whether a directory exists and
creates one if it doesn’t. Add some code to your function that writes
out the CSV files, to check for a directory to write to.</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" tabindex="-1"></a><span class="cf">if</span> <span class="st">'dir_name_here'</span> <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb74-2"><a href="#cb74-2" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Processed directory exists'</span>)</span>
<span id="cb74-3"><a href="#cb74-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb74-4"><a href="#cb74-4" tabindex="-1"></a>    os.mkdir(<span class="st">'dir_name_here'</span>)</span>
<span id="cb74-5"><a href="#cb74-5" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span></code></pre>
</div>
</li>
<li><p>The code that you have written so far to loop through the years
is good, however it is not necessarily reproducible with different
datasets. For instance, what happens to the code if we have additional
years of data in our CSV files? Using the tools that you learned in the
previous activities, make a list of all years represented in the data.
Then create a loop to process your data, that begins at the earliest
year and ends at the latest year using that list.</p></li>
</ol>
<p>HINT: you can create a loop with a list as follows:
<code>for years in year_list:</code></p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><div class="codewrapper sourceCode" id="cb75">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb75-3"><a href="#cb75-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb75-4"><a href="#cb75-4" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb75-6"><a href="#cb75-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb75-7"><a href="#cb75-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb75-8"><a href="#cb75-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb75-9"><a href="#cb75-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb75-10"><a href="#cb75-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb75-11"><a href="#cb75-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb75-12"><a href="#cb75-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb75-13"><a href="#cb75-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb75-14"><a href="#cb75-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb75-15"><a href="#cb75-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb75-16"><a href="#cb75-16" tabindex="-1"></a></span>
<span id="cb75-17"><a href="#cb75-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb75-18"><a href="#cb75-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb75-19"><a href="#cb75-19" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" tabindex="-1"></a>    <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb75-21"><a href="#cb75-21" tabindex="-1"></a>    filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb75-22"><a href="#cb75-22" tabindex="-1"></a>    surveys_year.to_csv(filename)</span>
<span id="cb75-23"><a href="#cb75-23" tabindex="-1"></a></span>
<span id="cb75-24"><a href="#cb75-24" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(all_data, start_year<span class="op">=</span><span class="va">None</span>, end_year<span class="op">=</span><span class="va">None</span>):</span>
<span id="cb75-25"><a href="#cb75-25" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb75-26"><a href="#cb75-26" tabindex="-1"></a><span class="co">    Writes separate CSV files for each year of data.</span></span>
<span id="cb75-27"><a href="#cb75-27" tabindex="-1"></a></span>
<span id="cb75-28"><a href="#cb75-28" tabindex="-1"></a><span class="co">    start_year -- the first year of data we want</span></span>
<span id="cb75-29"><a href="#cb75-29" tabindex="-1"></a><span class="co">    end_year -- the last year of data we want</span></span>
<span id="cb75-30"><a href="#cb75-30" tabindex="-1"></a><span class="co">    all_data -- DataFrame with multi-year data</span></span>
<span id="cb75-31"><a href="#cb75-31" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb75-32"><a href="#cb75-32" tabindex="-1"></a>    <span class="cf">if</span> start_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb75-33"><a href="#cb75-33" tabindex="-1"></a>        start_year <span class="op">=</span> <span class="bu">min</span>(all_data.year)</span>
<span id="cb75-34"><a href="#cb75-34" tabindex="-1"></a>    <span class="cf">if</span> end_year <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb75-35"><a href="#cb75-35" tabindex="-1"></a>        end_year <span class="op">=</span> <span class="bu">max</span>(all_data.year)</span>
<span id="cb75-36"><a href="#cb75-36" tabindex="-1"></a>    <span class="co"># "end_year" is the last year of data we want to pull, so we loop to end_year+1</span></span>
<span id="cb75-37"><a href="#cb75-37" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(start_year, end_year<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb75-38"><a href="#cb75-38" tabindex="-1"></a>        one_year_csv_writer(year, all_data)</span></code></pre>
</div></li>
<li><div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb76-2"><a href="#cb76-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb76-3"><a href="#cb76-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb76-4"><a href="#cb76-4" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb76-6"><a href="#cb76-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb76-7"><a href="#cb76-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb76-8"><a href="#cb76-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb76-9"><a href="#cb76-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb76-10"><a href="#cb76-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb76-11"><a href="#cb76-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb76-12"><a href="#cb76-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb76-13"><a href="#cb76-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb76-14"><a href="#cb76-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb76-15"><a href="#cb76-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb76-16"><a href="#cb76-16" tabindex="-1"></a></span>
<span id="cb76-17"><a href="#cb76-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb76-18"><a href="#cb76-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb76-19"><a href="#cb76-19" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(surveys_year) <span class="op">==</span> <span class="dv">0</span>: <span class="co"># 'if not len(surveys_year):' will also work </span></span>
<span id="cb76-20"><a href="#cb76-20" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'no data available for '</span> <span class="op">+</span> this_year <span class="op">+</span> <span class="st">', output file not created'</span>)</span>
<span id="cb76-21"><a href="#cb76-21" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb76-22"><a href="#cb76-22" tabindex="-1"></a>        <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb76-23"><a href="#cb76-23" tabindex="-1"></a>        filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb76-24"><a href="#cb76-24" tabindex="-1"></a>        surveys_year.to_csv(filename)</span></code></pre>
</div></li>
<li>
<p>The solution below uses <code>not</code> to invert the check for
the directory, so a message is printed one time at most i.e. when the
directory is created:</p>
<div class="codewrapper sourceCode" id="cb77">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="kw">def</span> one_year_csv_writer(this_year, all_data, folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a><span class="co">    Writes a csv file for data from a given year.</span></span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a><span class="co">    Parameters</span></span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a><span class="co">    ---------</span></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a><span class="co">    this_year : int</span></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a><span class="co">        year for which data is extracted</span></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a><span class="co">    all_data: pd.DataFrame</span></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a><span class="co">        DataFrame with multi-year data</span></span>
<span id="cb77-11"><a href="#cb77-11" tabindex="-1"></a><span class="co">    folder_to_save : str</span></span>
<span id="cb77-12"><a href="#cb77-12" tabindex="-1"></a><span class="co">        folder to save the data files</span></span>
<span id="cb77-13"><a href="#cb77-13" tabindex="-1"></a><span class="co">    root_name: str</span></span>
<span id="cb77-14"><a href="#cb77-14" tabindex="-1"></a><span class="co">        root of the filenames to save the data</span></span>
<span id="cb77-15"><a href="#cb77-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb77-16"><a href="#cb77-16" tabindex="-1"></a></span>
<span id="cb77-17"><a href="#cb77-17" tabindex="-1"></a>    <span class="co"># Select data for the year</span></span>
<span id="cb77-18"><a href="#cb77-18" tabindex="-1"></a>    surveys_year <span class="op">=</span> all_data[all_data.year <span class="op">==</span> this_year]</span>
<span id="cb77-19"><a href="#cb77-19" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(surveys_year) <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb77-20"><a href="#cb77-20" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'no data available for '</span> <span class="op">+</span> this_year <span class="op">+</span> <span class="st">', output file not created'</span>)</span>
<span id="cb77-21"><a href="#cb77-21" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb77-22"><a href="#cb77-22" tabindex="-1"></a>        <span class="cf">if</span> folder_to_save <span class="kw">not</span> <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb77-23"><a href="#cb77-23" tabindex="-1"></a>            os.mkdir(folder_to_save)</span>
<span id="cb77-24"><a href="#cb77-24" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span>
<span id="cb77-25"><a href="#cb77-25" tabindex="-1"></a>        <span class="co"># Write the new DataFrame to a csv file</span></span>
<span id="cb77-26"><a href="#cb77-26" tabindex="-1"></a>        filename <span class="op">=</span> os.path.join(folder_to_save, <span class="st">''</span>.join([root_name, <span class="bu">str</span>(this_year), <span class="st">'.csv'</span>]))</span>
<span id="cb77-27"><a href="#cb77-27" tabindex="-1"></a>        surveys_year.to_csv(filename)</span></code></pre>
</div>
<p>The equivalent, without using <code>not</code> to invert the
conditional, would be:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="cf">if</span> folder_to_save <span class="kw">in</span> os.listdir(<span class="st">'.'</span>):</span>
<span id="cb78-2"><a href="#cb78-2" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb78-3"><a href="#cb78-3" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb78-4"><a href="#cb78-4" tabindex="-1"></a>    os.mkdir(folder_to_save)</span>
<span id="cb78-5"><a href="#cb78-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Processed directory created'</span>)</span></code></pre>
</div>
</li>
<li><div class="codewrapper sourceCode" id="cb79">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="kw">def</span> yearly_data_csv_writer(all_data, yearcolumn<span class="op">=</span><span class="st">"year"</span>,</span>
<span id="cb79-2"><a href="#cb79-2" tabindex="-1"></a>                           folder_to_save<span class="op">=</span><span class="st">'./'</span>, root_name<span class="op">=</span><span class="st">'survey'</span>):</span>
<span id="cb79-3"><a href="#cb79-3" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb79-4"><a href="#cb79-4" tabindex="-1"></a><span class="co">    Writes separate csv files for each year of data.</span></span>
<span id="cb79-5"><a href="#cb79-5" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" tabindex="-1"></a><span class="co">    all_data --- DataFrame with multi-year data</span></span>
<span id="cb79-7"><a href="#cb79-7" tabindex="-1"></a><span class="co">    yearcolumn --- column name containing the year of the data</span></span>
<span id="cb79-8"><a href="#cb79-8" tabindex="-1"></a><span class="co">    folder_to_save --- folder name to store files</span></span>
<span id="cb79-9"><a href="#cb79-9" tabindex="-1"></a><span class="co">    root_name --- start of the file names stored</span></span>
<span id="cb79-10"><a href="#cb79-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb79-11"><a href="#cb79-11" tabindex="-1"></a>    years <span class="op">=</span> all_data[yearcolumn].unique()</span>
<span id="cb79-12"><a href="#cb79-12" tabindex="-1"></a>    filenames <span class="op">=</span> []</span>
<span id="cb79-13"><a href="#cb79-13" tabindex="-1"></a>    <span class="cf">for</span> year <span class="kw">in</span> years:</span>
<span id="cb79-14"><a href="#cb79-14" tabindex="-1"></a>        filenames.append(one_year_csv_writer(year, all_data, folder_to_save, root_name))</span>
<span id="cb79-15"><a href="#cb79-15" tabindex="-1"></a>    <span class="cf">return</span> filenames</span></code></pre>
</div></li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Loops help automate repetitive tasks over sets of items.</li>
<li>Loops combined with functions provide a way to process data more
efficiently than we could by hand.</li>
<li>Conditional statements enable execution of different operations on
different data.</li>
<li>Functions enable code reuse.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/datacarpentry/python-ecology-lesson/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/datacarpentry/python-ecology-lesson/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/python-ecology-lesson/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/python-ecology-lesson/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://datacarpentry.github.io/python-ecology-lesson/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.github.io/python-ecology-lesson/instructor/aio.html",
  "identifier": "https://datacarpentry.github.io/python-ecology-lesson/instructor/aio.html",
  "dateCreated": "2015-03-19",
  "dateModified": "2025-10-29",
  "datePublished": "2025-10-29"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

